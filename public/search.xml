<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>下载历史版本JDK</title>
      <link href="/blog/2023/11/13/%E4%B8%8B%E8%BD%BD%E5%8E%86%E5%8F%B2%E7%89%88%E6%9C%ACJDK/"/>
      <url>/blog/2023/11/13/%E4%B8%8B%E8%BD%BD%E5%8E%86%E5%8F%B2%E7%89%88%E6%9C%ACJDK/</url>
      
        <content type="html"><![CDATA[<blockquote><p>日常工作中由于一些特殊原因，我们需要下载指定系统指定位数指定版本的jdk，这个时候去网上搜索下载就会遇到各种坑，病毒、诱导连接、诱导关注/注册、付费、错误版本等，所以最好的办法是去官网下载，下面列举两种方式简单快捷从oracle官网下载各历史版本jdk.</p></blockquote><h2 id="方式一"><a href="#方式一" class="headerlink" title="方式一"></a>方式一</h2><blockquote><p>直接访问历史版本下载页</p></blockquote><ul><li> 访问jdk历史版本下载地址：：<a href="https://www.oracle.com/java/technologies/downloads/archive/">Java Archive | Oracle</a>，然后选择所需版本后选择对应系统进行下载</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/image-20231113210049462.png" alt="image-20231113210049462"></p><h2 id="方式二"><a href="#方式二" class="headerlink" title="方式二"></a>方式二</h2><blockquote><p>从官网跳转到历史页面</p></blockquote><blockquote><p>由于上述地址经常发生变化，所以我们用另外一种方法，从官网跳转到历史页面</p></blockquote><ul><li><strong>第一步：进入官网找到java产品</strong></li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/image-20231114000858520.png" alt="image-20231114000858520"></p><ul><li><strong>第二步：进入下载</strong><ul><li>进入java页面后找到【Download Java】按钮，由于页面更新的原因，位置可能不一样</li></ul></li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/image-20231114003542834.png" alt="image-20231114003542834"></p><ul><li><strong>第三步：选择大版本</strong><ul><li>进入下download页面后如下所示，选择【Java archive】页签 饼选择【Java SE】，然后选择JDK的大版本(以jdk7为例)</li></ul></li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/image-20231114005628576.png" alt="image-20231114005628576"></p><ul><li>接着</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/image-20231114012455048.png" alt="image-20231114012455048"></p><ul><li>第四步：选择具体的版本进行下载<ul><li>进入页面后选择【Java SE Development Kit】开头的标签然后选择对应操作系统的rpm或者tar包进行下载即可(个人更偏向于tar包的方式，可控性更高)，下载可能会需要登录，注册个账号即可</li><li>Java SE Development Kit：简称JDK，java开发工具，其中包含jre,所以直接下载这个即可</li><li>Java SE Runtime Environment：检测JRE，java运行环境</li></ul></li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/image-20231114031012578.png" alt="image-20231114031012578"></p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><blockquote><p>其他常用工具下载地址，包括但不限于</p></blockquote><p><a href="https://archive.apache.org/dist/tomcat/">tomcat </a></p><p><a href="https://archive.apache.org/dist/kafka/">kafka</a></p><p><a href="https://archive.apache.org/dist/flink/">flink</a></p><p><a href="https://archive.apache.org/dist/hbase/">hbase</a></p><p><a href="https://archive.apache.org/dist/hive/">hive</a></p><p><a href="https://archive.apache.org/dist/zookeeper/">zookeeper</a></p>]]></content>
      
      
      <categories>
          
          <category> JDK </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDK </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring集成nacos</title>
      <link href="/blog/2023/11/11/spring%E9%9B%86%E6%88%90nacos/"/>
      <url>/blog/2023/11/11/spring%E9%9B%86%E6%88%90nacos/</url>
      
        <content type="html"><![CDATA[<h3 id="1-启动nacos后台服务"><a href="#1-启动nacos后台服务" class="headerlink" title="1.启动nacos后台服务"></a>1.启动nacos后台服务</h3><h3 id="2-pom引入"><a href="#2-pom引入" class="headerlink" title="2.pom引入"></a>2.pom引入</h3><blockquote><p>一般用于父子工程，且需要做版本约束,详见</p><p><a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E">版本说明 · alibaba/spring-cloud-alibaba Wiki · GitHub</a></p></blockquote><ul><li>父pom</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2021.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2020.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>子pom</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-yaml配置"><a href="#3-yaml配置" class="headerlink" title="3.yaml配置"></a>3.yaml配置</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8848</span></span><br></pre></td></tr></table></figure><h3 id="4-启动类配置"><a href="#4-启动类配置" class="headerlink" title="4.启动类配置"></a>4.启动类配置</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//nacos注解</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceVerificationUserApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(ServiceVerificationUserApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-nacos管理面板"><a href="#5-nacos管理面板" class="headerlink" title="5.nacos管理面板"></a>5.nacos管理面板</h3><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/image-20231111031333349.png" alt="image-20231111031333349"></p>]]></content>
      
      
      <categories>
          
          <category> 集成 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nacos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring集成redis</title>
      <link href="/blog/2023/11/01/spring%E9%9B%86%E6%88%90redis/"/>
      <url>/blog/2023/11/01/spring%E9%9B%86%E6%88%90redis/</url>
      
        <content type="html"><![CDATA[<h3 id="1-启动redis后台服务"><a href="#1-启动redis后台服务" class="headerlink" title="1.启动redis后台服务"></a>1.启动redis后台服务</h3><h3 id="2-pom引入"><a href="#2-pom引入" class="headerlink" title="2.pom引入"></a>2.pom引入</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-项目使用"><a href="#3-项目使用" class="headerlink" title="3.项目使用"></a>3.项目使用</h3><ul><li><h3 id="yaml配置"><a href="#yaml配置" class="headerlink" title="yaml配置"></a>yaml配置</h3></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">    <span class="attr">database:</span> <span class="number">0</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br></pre></td></tr></table></figure><ul><li><h3 id="代码使用"><a href="#代码使用" class="headerlink" title="代码使用"></a>代码使用</h3><p>1.依赖注入（String类型）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br></pre></td></tr></table></figure><p>2.key设计</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//乘客验证码前缀</span></span><br><span class="line"><span class="keyword">private</span> String verificationCodePrefix = <span class="string">&quot;passenger:verificationCode:&quot;</span>;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//key</span></span><br><span class="line">String key = verificationCodePrefix + passengerPhone;</span><br></pre></td></tr></table></figure><p>3.存取操作</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//存入redis,设置过期时间</span></span><br><span class="line">stringRedisTemplate.opsForValue().set(key, String.valueOf(numberCode),<span class="number">2</span>, TimeUnit.MINUTES);</span><br><span class="line"><span class="comment">//redis按照key读取值</span></span><br><span class="line">String value = stringRedisTemplate.opsForValue().get(key);</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> 集成 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>成都</title>
      <link href="/blog/2023/10/20/%E6%88%90%E9%83%BD/"/>
      <url>/blog/2023/10/20/%E6%88%90%E9%83%BD/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="956dd81f8ccda7fe072812f40260c7fff9e6f9ed7b9246ce1ada37ee3bf55830">44b44aadf114d0357d519b3378ff8ebc24524186581ec02db3ef01d839f5f8291e10afda45efbb1d631cb2ab7e027aecd3ed170a63b15737e7576f8ac72691054a9634b0653b7f4717020fb3d2b4cf77a15b6384309e4894cb0a0138dd9eb98a07dd045c8e411b2f49050b4eeacb64593ab87773fb4d661118e6a0ea4915cb5f3e0b275c991aa9e9fa6fbd76c31dc94881668c7149e9e207326f33d464cc6bf0646de5e2dca43eb1836001939ccbd8a0c8676932faeef825837fddad934af845f51bcc62946f850bd030ac020777d3806fc2a55ccfd7df541d6c130c9ddb89eb7b11783846006f65ce6425935182e1cd641cfba461d5ba0e27e06e2e32a7e123d2ed588d6a648a040ca2ecab67b8a0743aa84f8aeb5845c664214037549ac23973b115fe8c4cdc0023002fc1fbde90532355227c1c3b380c030832ed466219efe33dd09996f088d342c06793a94953bd3590ce841f29640522d328429d450ed0fee6d7d8ec3ee06e1d6f0adb561eddbe0e8023df55ac1218e653fca589ebd5f4f2d01f9cf40422a78c0d6f3fb9c921739e1eaf3af29ccb96a4c4c37d2e14472ea91f50493c1de6da9ba4fea98022a268781148d99e5901faad505742c16637124ed16f7cd24933d357aa46de1e5c0c411ba8ae6cc9ee491c7a74cbc059c4e03176b3c9ec20d6e24bbfd6fb11676c8a17f772c7a7bf11be354bf0b388d5dbc56086d093bae083d4c9b0d6617fe722daa213ec66bad4404676fe1658966ec58d79ce6ee93850a2ca7e08e81158d3a76f7cf4686a0fd391a37871a3ee77626450da7e7a9c2b194eb26ff6f95f1605c8d6f92dabdf95b63de7284ffc221ff1628ecaa7e1cf4efd630c7c691cadbd882007d9449490ad9e48cecf2e66866e8a3b388a8417e83138153ac0a79bd0a4c531138015cb5403248742ce6863437a75f96c98423d36f8a5cbcfa424dc13d2804146f8c2eb751c7620d073e4dbf72bd6830be50ff8bbaa6fa33791c2765408e124326738f50fe2209bcc3be41ad26e69678a7df09c28c3403034a127f8f42b08611f64ade9f90996adb9a72344a9bfeba946457ba5bd98a3dbebd95143274615697226ebaa5669cded261f0f994ba4095ee8fc804e128d7e690d8866990f44f9e0772c3c27bbede30b3996757dac5b49454416828829732b6e549555a7ba0348c4024bf947efa2a3a9205afa140f5f54b599f791d8554d7912b0d0f7ac2920bcc74c4ea8654b8172cecbd5cd50f8105fd792cb693fd40516cba9f17dbdf0d136b16bc71221833ca55fc6709555c0ebc85acdbd537ab8e447234f679bb470a567abf812614c83ba4379e1bceaa1b075db90ac21480017ec192fad9fb1d28c8292985f4687edd5275d5660a09e8c8deabeef5d793fb6eeff7da9062ad5d13d92f49b5fff1db6b6e141dd11a92279aefa750c12d9f1ae4754e5aac0b0ddaf52adec4e37df133210e61f41bd731690d93f6ae1bd516a12c7d0cb64853f96dd53860b1ffae482705daf98384c51bfa604921a82dac5d29324c7cb95451761c48d4134c6c7b9558adb9806090a0ca1c6efd9d99bc6f94b5477760ffed4fb8ad10b1eead52cbae08973006515894371aaf3dc13855ed074e999146851270af53b980165c35ceb71e92f323bd1a7656e13c88895df1a6080bf6245a8f940a55f7159b0e9f9ba1044d9eb1684febb34cb4ff35c53864b07cfb8686d82f95b32b27c4aa2066f27db8eeb0c239a84d950f2ac155371e627d31ca30b24a03e527b1c622a0de033e873b1a039bc51df2ca7e1951ff5e2c3d8c0363e0002f56236d0922b2219ecd49c37842c05ddef64b2f16206f815ebc3a9ff96ae6e795f100a4fab076fb203e63b5c43227d9a7615b8ec5c89a4aee1c1352007b13975d44d99cced3e5310cbc26e7ca1864a5f0a702ae10352fa500cb8810c09e4e14f031ba56aeaac040849a4b133764ad0311d8e6e24b9f6ea87a85b0a6122796f830a779f838f43f5f39456fdad8adf38e0d470d1cf9632a2b2cd67bd4e03214ed00dee850286658e72bdc8c2cb725883b992974966fb8ec66579a8c589d34718dff3c2241523a7cc8eb84e0e6e00b36076561b533fd5068407bc76b26d9e8457e30824533c5080207c7a9251878663ad3490c13f598b16a0ed159fd1c4a977ca18002722e4fc9457e087b608a5a960f46515f0c4b56ef21b27e9de685e13ea857cba2488dbf99da849f2178bc0b58306b06d8e7251d117e7af432366ab9826d3012785e837bd700dcbd65b7d2aa1c01a121b76d786814e4256ab4e8acbce5a0f695815af71cb36f72ddea9bf9b00979d8057414e1784fed58bdbf037b900275c3898e0300ea980b69bf5a2c043bd20ac6dc263785425a455043a1d18b7ac07d86a2c7543dd54b3202779818d55bd7cae7ad8b9678414668bf6fca8a1daf0fe9a17a2774459caf7865f5d5173d938840bb3a12ee5e22c1ee03e6c7a90b10aced6b5cce333e9c05c626910c532668578b6332a2b1924ffe5fa3f67832d3c280b9d66c1af9caffc20a568a27f316651a1c0275ac9084b88240ebf486d0d18b820a397975b3988df707810d52f718d587b941a2b2213d9ea9d7f4d6a84aa4fb4ff014ee62eefea1ea01815050d5928dea734b996dbd77f19fb2da9559c9a9c0b4937f9cb4d41847ff1ab62c6b7c77ee03e41aa7cd85ae6d6475876b770a999b9c12041b852d5e69e268b7ee4eac35613f701d7d6aca83b652c24744c513a480d8efeb8b18c2d15088e3e3645f31da926c3e71829a94211346696caf5c511c581c4292406d43fdacbe342abad02891603677d41e6182e61811ec3f9a1aa1fdb63f05148bd04e9523fabd4500c5e9f1f91fb15843872f26a18c6b5779777bfdb4b5929baeab343516eaa8a6df6461005f295fac4e30d99657e562d9f3c578a3f1a9ca125c541048eeba238e6d2b7d45e61198fe66f4c6f074cdadc9f8055b9c59835ef91d440ae3c5696cd6bb763e8a90c69c08b68413a9aa8e5629e25b5305a565a29a92daf988d79d89ecd2df02e47e37b858e9b1a6efce62dee439bc8a0346c9c340d451ca85560ffc33f1a1033ae4b962dc8a9958bd44a7f713914eb1a9271c9810addc0f04a7c09f13895fdfc02ccf05639dd4d3cfa6ac480e5ba5aed1974f8650f77c120c2aeebd31041da7b296e19510d8b734ea2941370438e1e2decffa5d1fc83a87b693f7c613a688065c5951931a139b240993d2e8098a78acad15dcb168b3740a45fdc06d5fb8a32d089806b0f075981abc04b3f49e761d3d4487b2e230b310f3d8d90192e47addfdb736a9099c0804169ddf936c1c8122566bfa3b0507c537fafb1e7cbdba69faa729f120d8e8e08d1014823b418caeb744c7263498708e336915fa3034cc46672ec4e6a2b544644f1e995beecda11dc2ed0fbbb4cfefe126fa1349fafe2542b094e9e1de9b8d51df51cd8ce3d5127423341c65499fc4e1d0e75b6e667c0a1e459b2e41891bd3abafd5889bf04236915646e2030fe6ee495684fec1e532a391e070290501c4cd0275560b4ac8fddfc19404d2c8819069f1ed7880d69846266449ca3ba57fb6cba05a22a542364e89bf88f0d89d40db3ded9aab96e8e7445d48ea11f15350f70672cf8a8e2c01e92be50646fa10e8df688bd01b4c077b03de423f6d8e3412e5c8331b0e669b800be703bb28288b3ccafc34354c85e763d49adbb83127ac5643b71a05f1b1a8e5f94e1ac9d3d8033b6d54ce5c4654f108cda253311a905693c495c093514605b4fd67ab19e2b5613a529bddf780c1cd6e0fffcaaff8753a395cb6be15e26f128b58dc3a7485980943b3f24b4c8dc5a67b68af2f77d9e4b3c75cbe45d313e68ae18efae4c2f32171d90b82b53baea43a0315a2642373e9ba002529e822d3f9645bc3f5664785640d979366bab834e6fa7b8be026f0591bd1726881df4c7b6427246e47ee1ae38de34abd9ce79d9b3bf648a1d53038df62c5d110d91cbb0c4b3f3b1ed9cf6f900f8c784aac88088a9329bb6ebfd283b69b884100a2e678b116d29faf89dd8e234667a0a065fdcbab07c43584993b6b31ac6f76dc018762cc65a347c28166849838da1a55947ba697563298714356acea35083a75057e9cd20596782f4abbaa2a8c27ee0468363689613b341b81f7516acff27aa01f29c814fc4cb66b5371b14e19f20c341c264ebc377c6704a698dac87d1aa18baa4801846efafb2403340471e723f1db4cb1b98ad5b0f0ee6dd55747b962bb3ded8021efe8663a77e9068164833e2e2189ffe456890eb251351541704774a5c9b37cbff695f0836b6dd430f46206688d40f03dca7420b4fddfcd05acb83e56b50b55ff8ee25e8b7fe9c31be996a0b269f9094c484158d45c5f97546b829fb793066e784219c7ad69a3ce8c1bf49ca819b6ef4c9f11bd061bb4be55a7988fff89091438c9b73d3782a12a606efee5fd71c46561ae697975057317cdb4909ea77a9ea081b00c32057723c4d10db7aa59eb49e7556a18cc610568d6ed239ccec979c37ded086e8d4d3b96ccb330ebe26db80c26b84c6be9944d5e5bd5b9e12f76bb2949dca03442a83a7e30f23824aa5f3343886a98b1cdfb4d93ea657249450ae1363841be5ae24e8355569d05d24b5fdc56a9dcebe43fcec07b34a8e292b0af841c1b8fd55f68f7d3e2f2fd1b8ebfe33edd04b0ac46e4d0ab51009b2101b8d7e01e3d6d3f62338de854af247ed5c4541347b6c7c4710f4c2249a2bda4d5c3541c30c262a55c6b1dec8866a6b55a62d3312d4d28db1e2287a930b59d27c4032a9c7f82acefa0dbbe8a19c44b6f1fa92d364d01ca02bf45c7d837dc71a788ec2b50ad24bf89dceaa4e0fc23b17b29be2e31fbeabe5b3c3a2ab9914194925df63b1aadb1f197a40e93ef1058ee6a5ccb352f680e7866623c33bb16ba1d14de623f139e0b6b0b110f8e0f27bb20cc0a7d457171f22077c10c67300374e069f0bb51480bf32addd422fb47dd16f1cc3460816de11da85631b51cd2dfa0c8d0eeed214c284693ee0d189d8a297e3439cced485607c589513806cb704bd5a4061353bb2d164b2e92d4ab8cde1f830e22c83eee2a4028a2c08e59be4bac32a60c688be03d9ec11622b2197a0bbbcf143e454ecbd9e1d0650d0257d4a581e83316354d3fe31e35482f4b00da5cf4f23f28f157a573979ee1b5ea248893b3805f4f146f889e5f3d3d3da57a77f315c38e8187697b99f2a74d19cb43dfe2ce1679baef2e4ef7e2f2ff28a0dc8e59cd9a23a17562af97a0c89ed34d3ef9cc4ef1917278ef7c9412f84f6e5d3f803855b0d762bd44a94bef4f43caff443dd7fdfae9b16fb75abf9c18cd34026c581c8e8eb3fb7cb827ec362ac1384b214fbbe953902db992f4f1bce87e6dc288c6f2517eeec5c87c6ce0cf641ee8dcc14b54929c7cf5e6202fa0cd304d9c890fdd94af084637c79db4ca4fe80560ea9f59e948eb7386e34b050f74124d2b5dad2c557ceb8896dd84da9964cfa8eaff4a4c4868c3addea15904e62ff0e8b083df737154b3b7b0d1cf59b18f502ff8c28b551f79585188cd9dcf9865699d21a929920a53020c5375131d6afc4e89a5d0548a0194102612f2ec952e70bbb6afa26b04abe5248adadf8fc6627578c3acb7236be8a9a2c23005d23ab1f68e80e1dd9c63df734bfd070802a8845d795cfc812a08cb1e8bba4681b94f99a0c6f585c16d11b0dcd2ba825652f1873d8ed3989531f595dafa199f6875a1187161a121c39818ca770b3bdea0a8be6783179965b6a68514b903da7bf0a5e3035f5a42314ae925d51c6602a2b6192740e762460fc7aa32b5edb95708aa779d7122e69aa41d3bfa26cab4924f0fe44fc8d0ffc6e3766e94d64e035483923cc8cf35bf951d0c12c0e4067035478f68ec756c532f3bd524f4b2f32d190e3f41a936667446a0b8385e94508151152783d49a22b0f2b7e62289ea96b9aa58768c253a06a703639f8199be41f762b4d36a5748f22608655b3103e68ba126e8375caacacbb65131909122dd3e788c854647f225a5ebdd08348c0591e58d7497af0e546a6fc80f2dbed9f9c817cf306442970fdd6e1b07197cd292d918e476b39678e237a4d648afd41dde3194aab505db2f271021090de246a8f363dfe9bf9e525d25019d54dd2ace7623000d7e55bc69d3b3763a2d1f1e01d85edfdd70126d3ba13720bb3cbc4a6366869a09be63a7ca0636d6845423cc2d07b71e1df6669031441579d1f6c40e297917bc742f329462771a2a77fb14f94d50589eef20a70346bba6b81047892738048a8dffa1e66ed3c9a9337ca55f43e055fa6712a47ed9de6d685f2843660589fddac5f1d2e007f587fceee2d9e607df159e13b477a21ab099005ba1dd772ca44449c05371e778831f833650de21be8de941dae43f3de57b1fa5e0266343a1ff8db3b6ccb34229556eb02aeca6eb9dc2fdca1434f07a18f2a275c99d52357743e694dc7ced13d3aa6561e7eced7d4fdf06a9b31ade292a6fe62ba8b9a3c9e6ad7dea665aa896e43e9a9763a4e97edcf10e129f323e2876d5082fa0ac20a4021ed4a17e1213d9c1d8844460cc78358d7a476abfbbf083f3d9aab53a504c68bc24d619c137f4909242c665bc305071236b711aac514c96afd93fdc30425193390575298e06123e334da22e28361394e8a948c10238d75465e8b3d4bd7da3708bdea723af03ff6a92e6420fef5ba8842e6d4312601dca9140e1c6ec2d65fa133b4666ea5476d1482b8907cd5931d199aec3de52cf0b54dd1e7d153aad1a9af27023d2a0a8b459816a215ebc8ab6a991e40ae88524bd6ba736f4ba7b9d8094beb5ca80e07ed301f434fda698999d141515dc6bfbb8a637bb3363205eb91e3c311d71ae4944746d422e00305fefd34969c9e2d7edf9521b3ab41b259f001622ec7ba730624ca7c727172fe3657280c17be3b4ef3b472e1649bad1010c015b7767491c61d9e2191d14b70e6212d4329078c6872d7c6ace4e92d8af11f7fb93ffb5732ff6fe01bfa0616f8c2c3be8f5b4646c1fd8c76428e2714776be9a868efccea649274bab547c8aba17fa833309e8aa73eeeb8a10c5f792443de5bf8283691f03c2b98c5083b52b25207bb415afc9bcbae09f07ac9f12dcd2e7cef2b590a29474e1bc979a6163859cfa304543c8352fa2fd8f437e1609f48054e0d8ddc6d5f6e1bc7a304d02884c23d6cc94771bc8968854ad9188fedec36e00df8d9ef7c7c0c28baaa65236d9b24522d907f7f088e46c378d94ee5d4d8ce535ff37acbcfa3d4255afbe62c4f3ac7a1b84a130233d10bc3c079b0e8093f0b4526ef15873dd70ea8b403e2dbaa834ccbc10e8834504fcf600766e633a810d6d93b6618ccdd4ab84c63dde46990750921016a00313b9688ce25a6a8ce0f8d5ad96f13f3da7331d8771d3744cfb5e934f3e35a45a54d21db987405208e5c11c838b7393ca5e387d68f50c0e41b9394af50bda52168aacee0e1c931d9d015e2c1fef1db3f4801cf5b3e8bba149de24d288c768e998287d66afe5ab7cfdf649087ba54bd76c2fce2d59bd6d7a4ae4d98f6e41ad64332560e29af7304cca6bf1a5ccd3362ab5e50fe5ce7c1fcbcb1e473dc213261b1a18350fd760fca22a4d614da48569a180452c0d331a6005caa4f2a4c617bce71d7347591f388f69dffab43feb7a8bb2cc7050b965d57021c98beef64030ea024f50873de9a2c6ad5219c09a3546bfc219865147b8d9425f3f6af18bd28ff526f2ac90222364a1e3a8da414c0d94fee4a7b5954486e026037f0bad079756052542b2fa10c8e3d1e6a11e1a5a153a923ee8497823fc1effdfb53d957ff0e75938fee7ddfdc6478b1939eaa66ca0894f4dcc5b180cd8523b61459a0814ac8f4c4f4aeaa699f648ec520d4e557e5dac4906bf9ea1d1f5c32826d1ad523ae7c86764a4c373ad507172f327001d6835fa875e714922b0055689b20329874ac73cca3c54762cc861962e5eccf32ed3bfcabc6e7fff75d5bc64f3bdf5038795b30bf249a8b179284d8bae60b9734c5c78c05d44d8390e290783b044b7f81a04b1fa0257e9af153f1b4ae4d66a3b70a86ffada304782739a0cf3f23118b9272b61f3b5ca0b9b80d1db3b955f448162fa0ec50b76f00befc21470b286a1a0844dfc4d4d54a889542a6e2e551f78ad4431fa9b8155d07d600884c1c6c761537b868d4252179b71f4cf40fd447471221681b7465eb86f01b1e5a1b5162cd31656aa0c17d69c7a359a6dcdbda8acb4c7e34581e95340bddd122536ea3393820e43fc7a225565ddebeeeec04d7979aa5a0c9ed78946277afdfc0eaa7a0f9c63c7143e8089e27bf852f769f83dd11b63bb2be156a10ced0a288f6612efdf7756d6e58a31858431baacc1a083a4aa801dd5dec63be0e74e8ed8baa29c58a1824417ae00a1e80efd630e80968de4685a67486f51b6ab4853745468b3fd48cdbfa7eedcc3aa2bd8086276b72583d2a0cf7319f2dd42da10db45a07f7ea65628b978184c57cdb68c9f786208f4790b96f4d106b7f32e99568867f2fbfc356185cf9b57eaab729511621df75b1ba54ba5f3ab19a949957128eccbfd06de6b9cd780345b7a6fcbbceef83a77249c814f4a32c350354322334eeaa1a53a8651ba0e68041e046ad3f25349f3b5a81d3b58e61922ebd133734293bd1c72c8b5b0bce125db192f0b6d3382bb5bda8384932b6715ded4d324379c9db4e5c3c4ca98a7e77198abc5456e67412b7e9f9040e2621ebec7e77e0b21b47cb2071c79ff98745787aaca3d912c1af52d90f9844ce9e876355c8d8f136437288b17778081c166d77fa4bb5f959efa7361657a21f7125d5120f72faa13dc6a04fc2956a8005a78eccc38e4cd236c0f53d102a3503873c0849dba6a0f08c540688b5ff9634395ffe467788f55217183eb0a448f11838f77813752b3009ed9fe5</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 成都 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 消费 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>work_log_扫描仪</title>
      <link href="/blog/2023/03/09/work-log-%E6%89%AB%E6%8F%8F%E4%BB%AA/"/>
      <url>/blog/2023/03/09/work-log-%E6%89%AB%E6%8F%8F%E4%BB%AA/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="d6226f23946d278f007d148222144a2d318ecf0921f00b511aca1ed283e28110">a1ab2e2e252cfc8ba8d33313381659647c35083cbaff10f6599aaaaf5e552710d49689fd796441af53586397b72777af55d1ff86f2625d472dfa4fc715955c1df583eb77b1860e2f9269f88f5523887df2a9a08e67ac8b92c66cd0db472efacc33823de6f8b5313af4a46b2bbf2ba3665b62705589e906ebde295e18e438844c2e0831bd7100bd534132ec81423f3f6cc0241cf6103e1451896179dab474469517947dabc5bdc0efa140da495347f078c2846bbff50996beeb410ba96e434d8b3a588689300297829453829bc89509098238388044b7f883d5ecfa73d8e97b40d120800d605d1053f301f25591f8f04cc63b0c6dd3fddc7a2f9a66592d72a18d227f0a6c4bed99f86264bd5cda55d99fb6d152779b9f48b0bdb736c58c78839393bf70bc8e4d5879faf15a231dd82797497e786e2b755690e729119871ab694ca99229d7870d7fd8d196e3cd53c3c8420405294d2adf71269decab570d254e14657cb244dd196b2eb5e06baad1d0617e842c18e2c230b341406e5faf6e1b10bb894a64fd9fc9882c2a7d38db481dad4c0efff07e08eeebe9897be6ad6737a5aa7d67117061f0cf7fc5cbd5f8e24fb1b18b12704eb0cc815f3ddb885d495c09ff360b14e4edd7a74e85546a55fbd26f0684dd60b079d92803616b835aaf6024ca6de136454d77fbac0774ede8db912716cbc126f9b7ec439c13775c4e7bc91752d1563763c23312d991c23ef769f161ddeddbfeffb541c501dc265ebead6b62b7e58a30a7265032d580af2b9043f802b6e66650725da616b00837216915e59becde78ac0ce327a40fd6b02ee47b4302eb2aa4987b9d8092084d3b49772f5ce021b748155ffb4be037cedaf266bcc5fb0f57d7e485fe35b7525c532194efaef2cb67da4a97ad72dfcacf4b8193075822790fe989c21f5692d1622aad36f45c4cced6775866dedbf0f2d4c5c780d94b764c1611407ed641dc3b612e1d703051df51fed57338a220824547509e19f7000942a408df41dd08011951c089c4633b99a1</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> work_log </category>
          
      </categories>
      
      
        <tags>
            
            <tag> work </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>work_log1</title>
      <link href="/blog/2023/02/17/work-log1/"/>
      <url>/blog/2023/02/17/work-log1/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="0519813ee513a634345ed6111becb62b429e6552bf3b1f35c0dd9dacf6cbeb1a">6ad0d7095c9627d9ccf8c0c5173cf3f49769a1c73351106faecb0e0923dc70df46fce01524157b0805d5fc2163541311f9279f383156c931f2fc1b532c30635539b9efe735f546eefc16518eb1aa5bb0d724869676100e562e656d80230b567bc8d41f2db25775adcb79d3219b262d813909c789a6ed9beb2a7d7549e1282d31e63b98e78c0204d77e88180851e5990ea502106bbfffa60c1e5a0b74838b7f9911f831ff716a1c8a4d2427abf3c7a0d57155c898cd9e10eefc56e1924cfd1544684c473d9ca12cf314118d2d813a62229720b3e540b09315963002f0b43b565a2e2a403a5594f95ee4919e79bfd8fbba1fe3c5eecb41da422b3e31511e5678aa82660af971edadd6d706049f39c5b6a7b761ae3c45d9ef878682f836788f9473c18d1d62b2ceec42a611b2fac434ce4ef7d51d5fb22b9636c98c96d395dd51bd593bcafac7888854fcef3dc5fe03641bfa047c6f593a310f4389c0738a0ae48876e5a458ce7799161151454a9f938444059d8edc94fff8b88e410b444edf2aef7adbc71fc6246ae7524302749b7b0f07e5128b79cc874d73f9223ca96312d533a709add08803e218e1c56fff4dd12620d48aff98d775f49f7742a60ea007d432aa86bdb4577d331b53215e69ae8d0cd6942ab1d7e5ad456de5abd49762848fa64fdca20cb88e0c32c35ab3cd38736f7cf05824fbd3e081e40eb030bc136b048b174ac3549ff88205a5e2136eabc55d0d51832ec6ff0a938a7efc3f65846eca9c20e37636d9b0ca59f8b66ed86e3f229f1e8dda503e88496a99cfb3e6b41be80b9b503cda2ebe4827feff829a38fb785226bba5c0c0b6c9b6aaba36203b2092b8a078a7688bcfc0e4847409594afba566d2d8c770eef292a3224a1941208274e6ec39e2abbff206893717c6506f4c6e1e73dc303959701ec72daf76711cd35a11c63c28e66f8f8a74e3fea2b45fb91566b5043c3ca850bce7614e2fe407c0e42303ccda1204d1a80c253d59704a63de616519db18bd93f20d3ea23962eb5b246271b592f1030ce301af3d76a1bb7b03d9fd75a8ec3253fc5d8da02f2a0eeb564b2e2f785ff307493747dcb7d0bf9bd5bfd14e35734153b7a8aa1214c4c52984cdc9711f1870122b792b4abfeaec531ff207ae349050d20cb151d032ee72275c46e56a360b5e4267a82aad550eed6ac6735fceb4c3a15728411501197e4ef1e0a0b62baaddb63890abd348f6c32ab446f5ce76a66fab20dc91811fac20a6eb495de3cc8af6417b52e85e3bbbc01cf0146e47d31cf71f65c3cc89c8392ec557bbd7d131e7a2d857fcff837e2a141ef47e90c4a409e055ee6347205d2a941fe06ebd78c008e7be3d4bfb8f1f75511f71b90ebb6c32e9d2791d6e470a6a83fe96639f8a5bac5d674b65e52e5f0811cf2a53fc02c7a4001420f5561e62bb5376c7da8c68c886053da61520f9e7799c047bfaaf3622b7bd0ce7b5ad05943e7a50f98d0415ebbd6716a38d67be257a21fe817c8509bf039f21e131a61bad0f7426539b2223bd44101070800b7c351ba4eb3130fbcd6c9f484e6e42ffddfe500690b1740db4101782deba9680f0bc9b17036409b86cf43d885f4b96f00395bbc996c46c3341dd5d4b3a4e13fd539d5cc0862097840c814126452a643f12bbd6327fc21b815bec568d943471dcbaf7963502ce673cf3e99e0a25fb365f1a67d8c59cf8778d1fd4ba7ff6cd02d110cc2b0fa9dcf84ff6dede885a2bfce55cfdc05524d2817f5c28b4a19646b9701207713e422a09fabf7604f31c5e2b7bbd0d6550658d8902615db24e8eea65ff0c8829f073a2816e4448af509a5b5aaa5eca8ae6b73e5a361f3e758867a170d208f2aacbb4119c131b8db35cd3d75f67f94fbd8ccf4212aee5c01261f37c3b46b2be29b0dde1a7f62c799c88c30219822dd51162df2b02eb4d43c711aeabbaeae2c7973bd5c88eaa1e335aed7ebefdcd199e1b304d5d4a8767122b8eb3092819b095a93446188bd3acd1baadea9f3bb5421cb66c6add21feb7d7f9dca3ead3fd1d4795db5408f6878c9cb5b0a0eb49bd6f621c9d22871152e0ab04fe2f5f636dc5e36164963fc2a57a65454293e38c0e382a8c3aaedf732bbe04128a8294c0495813d7b75dfbf0263b0fc3a86ba24a5deb1032c3ed26dc75684717db8910a6f85e85bd06968bd2d7fb699fae24468bbfc0ce748312cf5801aaf0db462a7cf6c295ad198b3a13b0b63299d20fd50a89b2070923c045b813c420ffb0237e350819891244df3bc3e0e5fa04a8b3719e1bcb9c7a3092f725d76e98b9fcf9c44b13095acdf43a25cc3d0da225ee6730a554162272dfaa5dac9c30f063633c220218dd2ac1e99ebff65cd3dfc9c1e810315f34e07624ffd3031c0a6109fc89da40d6c5b2225b2ac47e7fcb537572c4a042fcbd230304c82d4686faa7d48dee45ca8bffc31bcf2e13c7975a5ede7f81d7ab4f9706f342d9a7cf3b5150c52bfb165bf1f634cf8e592e8c1307554a335180c27403be90fb4831c11977929847349ef23f4b509ff84467ebb07b87a43095a80ca5fdeb4aed9b7c12394dc2a00ab20d2ec57861bad62bcc632d62dae2b49b87226a98d570cf1acc6a9f78e0d367161d39f6a0dec26105107bb2bb35d2c2d97d50cc82e09ced08750d0b7be9d1f817dc63b3e79b0414116e02021045a29920237cf24a8361084779267f81ce26908b48b1c804fe5c0cb73dfaedee719aba8beff10f1287a4e7d79da822f9efddc43947de90a7a02e14b9c20c37f9e5e87bc8f4c520913b8458917344233c7e910afafca45be1d294dd2b81eea1cbe9e1692bcfec51f8e4e9afb183cdc4e6e2cb6debd67ba304f9e824e39dd8b20226393666bd5f0a57016100894b08e3020cac849928649787f76f4e74d941c937d44b3c9276a01c896dc267649f7bc19d2fb9a995823acd6fd71dad14716e07530b955fba338bb0bb1c76de575025aaa45964ec185694d1f7f3a262eb04f88aac74bba56aee6d0a8e836d445954b8c854f741fad1c783c2a6461d2b9a9de2e26c01ace32dd1c8bcf063c1c167d26cb190d31f966a9aa6472ab6d082d25c7f8188ce66ba15ea21d6c360e6964d4d1f1939c86fc254815828da5504deab39adac2aa788a8be4e73b3f11285452d81f85b69d8a5a78246b84461d3e8cb1095e7448b6559dbd589ce8f7ca1f08920f407a2e895598dc667ff43e0ffc41355c7e7de121eaa4d32c3391bbb8682a46b10491ff60a839ebd3bfdf348df166a1b00cfb9338769efa2d048b56d104e591c16ca28a5ce3ffc2d49ca7a6435d20f522340803531a74e382d34433278ee9e2068d79570b4a99f7cbba94fc9fe2f62aafbaaa251ce98bef68c2c48aabb6572e82560af9b0b1e63abbbf22b57bc03cbbc927cf11a2686a3e5f0e819bac4fc445ec549eb0622592003faf55f1397e8f191aea0c326a71f104cf51cbe6af23b2745ad911c83234713a9ef84b63fc38f8baacefb3bf263e67702bc9d4d2feb6e64e7ee59801d7d8e2887e3b2ccb13a9b88bd9fb1160785986f3769bb6ae98a9b99afbc197258a210c0f33a70f4c0956ac747df67280713996d6f36935b7d028d6663f6bc51c99857e665673bd22d5f5912f0870a2af085be558a46a0cc0dc04eada6601458a80c600e8063201ef46bd9b9a854d2085a6fba554d5456e5b41cd6153523852d18b42d283d6e1846e1adae0c572dc1004a0385fb45fb0acd6d647224488a6beb8e81c943e08977061b7dc65b60db4100d1042d70bba8008d50642275b2d6ff99fc4606577872d60947ef94c3a9caa76d2ae76f98b941ad0db0e216c2d57e0dfac3ba711850c95eac1ddba5c3f7d4c424c65d62e9764047ecfb2c6c5e642de183d6a61fc4d042f34c9e1dae7d3663662de88b533ec9537b2b0f8d8b34c840b1415b4be97cc90f5cba8193ecf1dc231a3a5b483adf06436e290aed216ff15bbed84ce62277d38d83a0513a8f04eb59aa37517dc716b3628dcd8c98d2d7a359f28583676aca7d6f33194f9a6a23c3713e5c0b9bef9d8826e2d496dce85ec3eb50654ae0f9310333489bd22217a41d3cee01fa1e2a8629a8064e8795d3689e1fe28be279605876c527fec5364de0235ff1e9dc39743360a6ceb4279358c6df4b13674c</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> work </category>
          
      </categories>
      
      
        <tags>
            
            <tag> work_log </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>work_day01</title>
      <link href="/blog/2023/02/08/work-day01/"/>
      <url>/blog/2023/02/08/work-day01/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="548981420ef541df9c99ede28a21852806633e94e8d0ec05baa290cf0987fa1a">6ad0d7095c9627d9ccf8c0c5173cf3f49c7bcac5cf17832b0b11e1723f3717d510c020948a1be9decdc71c371bda6b4a3262c0b0de486d8e18a90dc0a0794ca4b2e0bd5c5b33f12379d61e203616c59dfaf69f5961d4ccd75a3b6500bebb52b3f86aafb38b3fdf14fec0feef438b1c0ac512780e6086cf0b7f496db9697832694a4a01a8d9d5c53bffb863b98fff0d7c09b9d5793a277c70d73e396e633adf43438b55c11aa1d556d25f23ef40a62c97918331757301a49995583ebe501b72b818856d582e3bbf87dc621bdde1f733d5811494b7a9d38901f03208db5d54efd661b9a2b4fad3b22388a58e07a0a82c8c223774f55f5d8208f23e80505a4f2c39abffb0d87c4109e645db2a8781518efbf11451fe8ea45044118742a3529906aa7692041519625953b051183893e0f074a0fda827a37baa96e9b82ee1266d20e52f5d46e2a15ed4a14c91785f1b3174d1e1b68c6075b1a2264d01090440e8469f02871f3f1404f94024cc9492a86f41e4f47f7924030923632f5948e71baa61b00a0b2133e5d1a54c56cf66ac44b25a70951e94f651a0b624c1adee4f44601babf695421b38af85a3a6a84ac4c93a1781138563541cf0e5a8d03a63f7c45e08593b8585cfb1695973a4884ccd268a78fce8b7c8eb44aa263d81368e13f7d0718661a49f46bce999c992b38c198ad663333a8d106b09d12f146c8b7ca833705199c60d496044c7b605659bdd55b4ba38846cb82ca2ee24ac52fcecc962125eca9ec4c63950404dcdc7b69e64b6ecfb5007f26c30ae03f4e222ae8f37ba8dbefcfd86e8a737c2ebd696d8636c12445e0663746b900c2c242c30a898d4808b393107ebc5acc0d966abf47cbe48922dcb34c3eda8126f4f1c6651b2136a187b5d13a227af74495f2285bee8e32a50458329f2e05a3e661494701034ee6d8d357d18d53ca5860d02fcc550ed3c290d02cd9d36</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> Work </category>
          
      </categories>
      
      
        <tags>
            
            <tag> work </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redis基础02</title>
      <link href="/blog/2022/10/23/redis%E5%9F%BA%E7%A1%8002/"/>
      <url>/blog/2022/10/23/redis%E5%9F%BA%E7%A1%8002/</url>
      
        <content type="html"><![CDATA[<h1 id="Redis命令"><a href="#Redis命令" class="headerlink" title="Redis命令"></a>Redis命令</h1><h2 id="一，String类型"><a href="#一，String类型" class="headerlink" title="一，String类型"></a>一，String类型</h2><h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><ul><li>修改或保存key以及value值</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set key value</span><br></pre></td></tr></table></figure><ul><li>根据key的值获取value的值</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get key</span><br></pre></td></tr></table></figure><ul><li>将key对应的value进行递增 +1</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">incr key</span><br></pre></td></tr></table></figure><ul><li>将Key对应的value进行递增（指定步长）</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">incrby  key num</span><br></pre></td></tr></table></figure><ul><li>将key对应的value进行递减  -1</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">decr key</span><br></pre></td></tr></table></figure><ul><li>根据key去删除键值对(1对应删除成功)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">del key</span><br></pre></td></tr></table></figure><ul><li>设置key-value同时这是对应的有效期 （timeout  s）</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setex key timeout value</span><br></pre></td></tr></table></figure><ul><li>表示剩余时间 ，-2表示键是过期的/键值对不存在</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ttl key</span><br></pre></td></tr></table></figure><ul><li>表示键存在则不做任何操作/不存在则新增一个key-value</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setnx key value</span><br></pre></td></tr></table></figure><ul><li>设置多个键值对 -批量操作</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mset k1 v1</span><br></pre></td></tr></table></figure><ul><li>根据多个key获取对应的value(只要在db中都可以获取)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mget k1</span><br></pre></td></tr></table></figure><ul><li>表示给某个key对应的value进行追加 最终返回是value的最终的长度</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">append key value</span><br></pre></td></tr></table></figure><ul><li>表示根据下标进行替换/修改</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setrange key  index  value</span><br></pre></td></tr></table></figure><h3 id="图示"><a href="#图示" class="headerlink" title="图示"></a>图示</h3><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220907200816.png" alt="image-20220907200816208"></p><h2 id="二，Hash类型"><a href="#二，Hash类型" class="headerlink" title="二，Hash类型"></a>二，Hash类型</h2><blockquote><p>定义和优缺点以及适用场景待补充</p></blockquote><h3 id="命令-1"><a href="#命令-1" class="headerlink" title="命令"></a>命令</h3><ul><li>存放Hash对象</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hset key field value</span><br></pre></td></tr></table></figure><ul><li>根据键获取hash对象对应的值</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">het key field</span><br></pre></td></tr></table></figure><ul><li>判断key中是否存在field键（0或1对应不存在和存在）</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexists key field</span><br></pre></td></tr></table></figure><ul><li>获取hash对象中键的数量</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hlen key</span><br></pre></td></tr></table></figure><ul><li>根据 key  field删除键值对象</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdel key field</span><br></pre></td></tr></table></figure><ul><li>自增/自减（指定步长）</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hincrby key filed  [num]</span><br></pre></td></tr></table></figure><ul><li>获取hash对象对应的键有哪些</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hkeys key</span><br></pre></td></tr></table></figure><ul><li>获取hash对象所有的值</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hvals key</span><br></pre></td></tr></table></figure><ul><li>获取hash对象中所有的数据（键值）</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hgetall ke</span><br></pre></td></tr></table></figure><ul><li>表示存在时则不设置键值 ，不存在时设置键值 （相当于setnx）</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hsetnx user name  johny</span><br></pre></td></tr></table></figure><h3 id="图示-1"><a href="#图示-1" class="headerlink" title="图示"></a>图示</h3><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220907202911.png" alt="image-20220907202911774"></p><h2 id="三，List类型"><a href="#三，List类型" class="headerlink" title="三，List类型"></a>三，List类型</h2><blockquote><p>定义和优缺点以及适用场景待补充</p></blockquote><h3 id="命令-2"><a href="#命令-2" class="headerlink" title="命令"></a>命令</h3><ul><li>向列表（队列）右侧中加入数据(键值)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpush key value</span><br></pre></td></tr></table></figure><ul><li>从表头（左向右取数据）end 为 -1时表示取得所有的数据 </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lrange key start end</span><br></pre></td></tr></table></figure><ul><li>从列表左侧(表头)加入数据</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lpush key value</span><br></pre></td></tr></table></figure><ul><li>从队列的左侧（列表的表头）消费元素-获取到该元素且从队列中删除</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lpop key</span><br></pre></td></tr></table></figure><ul><li>从队列右侧（列表的表尾） 消费元素-取到该元素且从队列中删除 </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpop key</span><br></pre></td></tr></table></figure><ul><li>获取队列中当前的所有元素的个数</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">llen key</span><br></pre></td></tr></table></figure><ul><li>表示再refVal(关键字) 之前或者之后插入 newVal </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">linsert key before/after refVal newVal</span><br></pre></td></tr></table></figure><ul><li>表示在队列中根据索引进行修改值</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lset key index value</span><br></pre></td></tr></table></figure><ul><li><p>表示删除队列中count个 value</p><ul><li>count  =  0的情况，删除队列中所有的 这个元素</li><li>count &gt;0的情况 ，最多删除count 个关键字</li><li>count&lt;0的情况，最多删除count绝对值个关键字</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lrem key count value</span><br></pre></td></tr></table></figure><h3 id="图示-2"><a href="#图示-2" class="headerlink" title="图示"></a>图示</h3><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220907205925.png" alt="image-20220907205925070"></p>]]></content>
      
      
      <categories>
          
          <category> Redis基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redis基础01</title>
      <link href="/blog/2022/10/23/redis%E5%9F%BA%E7%A1%8001/"/>
      <url>/blog/2022/10/23/redis%E5%9F%BA%E7%A1%8001/</url>
      
        <content type="html"><![CDATA[<h1 id="一，浅尝Redis"><a href="#一，浅尝Redis" class="headerlink" title="一，浅尝Redis"></a>一，浅尝Redis</h1><blockquote><p>是一种基于运存进行数据服务的读写工具（优缺点，适用场景待补充）</p></blockquote><ul><li>按要求下载相关文件并解压，如图</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220906204235.png" alt="image-20220906204234781"></p><ul><li>文件打开后依次点击</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220906210123.png" alt="image-20220906210123143"></p><ul><li>redis-server.exe （表示服务端 ）</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220906204721.png" alt="image-20220906204721575"></p><ul><li>redis-cli.exe        （表示客户端   —双击执行） </li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220906204749.png" alt="image-20220906204749574"></p><ul><li>进行简单存储操作,依次输入以下指令</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get name</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set name ckr </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get name</span><br></pre></td></tr></table></figure><ul><li>得结果如下图</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220906210335.png" alt="image-20220906210335513"></p><ul><li>启动顺序   ？应该先启动服务端再启动客户端</li></ul><h1 id="二，相关疑问"><a href="#二，相关疑问" class="headerlink" title="二，相关疑问"></a>二，相关疑问</h1><ol><li> 有无其它的方式启动客户端和服务端  </li></ol><ul><li><p>使用windows  dos命令操作  </p><ul><li><p>关闭之前使用的窗口</p></li><li><p>cmd -&gt;进入redis所在的目录</p></li><li><p>输入redis-server.exe并回车</p></li><li><p>输入redis-cli.exe并回车</p></li></ul></li></ul><ol start="2"><li>如何远程连接别人的redis服务端呢 ?</li></ol><ul><li>redis-cli.exe -h 【ip地址】 -p 【端口号】   —注意空格  <ul><li>如下列图</li></ul></li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220906212520.png" alt="image-20220906212520826"></p><ol start="3"><li>redis作为一个服务如何限制无关人员的访问</li></ol><ul><li>首先找到 redis.windows.conf 这个文件 </li><li>在该文件中找到requirepass ,且这是密码  ，要求实际开发过程中密码要尽量复杂</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220906213352.png" alt="image-20220906213351895"></p><ul><li>在redis目录中双击执行redis-server.exe启动后，使用客户端访问，并没有要求密码认证</li><li>在cmd –&gt;执行redis-server.exe  redis.windows.conf</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220906213528.png" alt="image-20220906213528044"></p><ul><li>在客户端上获取信息get 提示需要密码  </li><li>密码认证 指令   auth  你的密码</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220906213744.png" alt="image-20220906213743963"></p><ol start="4"><li>将redis服务端作为一个服务(不需要每次都启动)</li></ol><ul><li><p>cmd进入redis文件</p></li><li><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220906221338.png" alt="image-20220906221338672"></p></li><li><p>将redis注册成为一个服务 </p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server.exe  --service-install redis.windows.conf  --loglevel verbose（服务名称Redis）</span><br></pre></td></tr></table></figure><ul><li>启动redis服务</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server --service-start</span><br></pre></td></tr></table></figure><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220906221707.png" alt="image-20220906221651079"></p><ul><li>终止redis服务</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server --service-stop            </span><br></pre></td></tr></table></figure><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220906221806.png" alt="image-20220906221806764"></p><ul><li>redis服务更名 </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server --service-name 你的redis新的名称  （）           </span><br></pre></td></tr></table></figure><ul><li>redis卸载  </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server --service-uninstall</span><br></pre></td></tr></table></figure><ul><li> 思考:  如何在一台计算机上安装多个redis   ?</li></ul><h1 id="三，Redis可视化"><a href="#三，Redis可视化" class="headerlink" title="三，Redis可视化"></a>三，Redis可视化</h1><ul><li>下载并安装Redis可视化工具</li><li>启动Redis服务</li><li>打开并连接本地服务器</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220906223617.png" alt="image-20220906223617247"></p><ul><li>选择第一个分区进行Redis命令操作</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220906223818.png" alt="image-20220906223818267"></p><ul><li>String类型相关的常见的命令：</li></ul><ol><li>保存/修改-根据键修改  </li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set key value</span><br></pre></td></tr></table></figure><ol start="2"><li>根据键获取值</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get key</span><br></pre></td></tr></table></figure><ol start="3"><li>自增(默认步长1) </li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">incr key</span><br></pre></td></tr></table></figure><ol start="4"><li>自减(默认步长1) </li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">decr key</span><br></pre></td></tr></table></figure><ol start="5"><li>根据key删除键值</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">del key</span><br></pre></td></tr></table></figure><ul><li>上述命令操作结果如下图</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220906225259.png" alt="image-20220906225259335"></p>]]></content>
      
      
      <categories>
          
          <category> Redis基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redis基础03</title>
      <link href="/blog/2022/10/23/redis%E5%9F%BA%E7%A1%8003/"/>
      <url>/blog/2022/10/23/redis%E5%9F%BA%E7%A1%8003/</url>
      
        <content type="html"><![CDATA[<h1 id="List类型"><a href="#List类型" class="headerlink" title="List类型"></a>List类型</h1><h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><ul><li>从列表中删除</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lrem key count value</span><br></pre></td></tr></table></figure><ul><li>截取  从strat end (下标)之间的元素 -其它的元素全部删除</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ltrim key start end</span><br></pre></td></tr></table></figure><ul><li>根据下标(索引)取值（如果超过了已有元素的小标 则返回  null  ）</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lindex key index</span><br></pre></td></tr></table></figure><h2 id="图示"><a href="#图示" class="headerlink" title="图示"></a>图示</h2><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220909162558.png" alt="image-20220909162558364"></p><h1 id="Set类型"><a href="#Set类型" class="headerlink" title="Set类型"></a>Set类型</h1><blockquote><p>无序集合，不可有重复元素，可以存放的数据量 40亿 </p></blockquote><h2 id="命令-1"><a href="#命令-1" class="headerlink" title="命令"></a>命令</h2><ul><li>表示向keySet集合中添加value成员（查询出的成员/元素没有顺序的）</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sadd key value</span><br></pre></td></tr></table></figure><ul><li>表示查询set集合中当前有哪些成员/元素</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">smembers key</span><br></pre></td></tr></table></figure><ul><li>删除set集合中的指定的元素</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">srem key value</span><br></pre></td></tr></table></figure><ul><li>随机弹出（消费）set集合中的指定元素个数个元素</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spop key count</span><br></pre></td></tr></table></figure><ul><li>随机获取（源数据不变）set集合中的指定个数个元素</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">srandmember key count</span><br></pre></td></tr></table></figure><ul><li>求key1集合相对于key2集合特有的元素（成员）</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sdiff key1 key2</span><br></pre></td></tr></table></figure><ul><li>将key1中相对于key2特有的元素存储到var这个set集合中</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sdiffsotre <span class="keyword">var</span> key <span class="number">1</span> key2</span><br></pre></td></tr></table></figure><ul><li>表示求 key1 和  key2的交集</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sinter key1  key2</span><br></pre></td></tr></table></figure><ul><li>表示求 key1 和  key2的交集 且将交集存放到var中 </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sinterstore <span class="keyword">var</span> key1 key2</span><br></pre></td></tr></table></figure><ul><li>求key1和key2的并集</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sunion key1 key2</span><br></pre></td></tr></table></figure><ul><li>求key1和key2的并集存放到var中 </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sunionstore <span class="keyword">var</span> key1 key2</span><br></pre></td></tr></table></figure><ul><li>将key1中的member移动到key2中</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">smove key1 key2 member</span><br></pre></td></tr></table></figure><ul><li>查看key中有多少个元素</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sscard  key</span><br></pre></td></tr></table></figure><ul><li>判断集合中是否包含了某个value</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sismember key value</span><br></pre></td></tr></table></figure><h2 id="图示-1"><a href="#图示-1" class="headerlink" title="图示"></a>图示</h2><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220909163702.png" alt="image-20220909163701900"></p><h1 id="Zset类型"><a href="#Zset类型" class="headerlink" title="Zset类型"></a>Zset类型</h1><blockquote><p>有序集合，哈希表，兼顾list集合，每个成员设置了一个double类型的分数</p></blockquote><h2 id="命令-2"><a href="#命令-2" class="headerlink" title="命令"></a>命令</h2><ul><li>向有序集合中添加成员且指定成员的分数 –支持批量插入<ul><li>分数可以重复 ，添加的成员是不能重复的</li><li>添加的数据中如果分数一样的情况，加入的成员无序的</li><li>可以给已存在的成员修改分数，但是结果返回  0</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add key score member</span><br></pre></td></tr></table></figure><ul><li>表示查询输出有序集合的成员（升序）</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zrange key start end</span><br></pre></td></tr></table></figure><ul><li>表示输出有序集合中的成员（分数降序）</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zrevrange key start end</span><br></pre></td></tr></table></figure><ul><li> 给有序集合中的成员的分数进行增/减increment   (表示增量)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zincrby key increment member</span><br></pre></td></tr></table></figure><ul><li>获取有序集合中成员的分数</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zscore key member</span><br></pre></td></tr></table></figure><ul><li>获取有序集合中的个数</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zcard  key</span><br></pre></td></tr></table></figure><ul><li>获取指定分数区间内有多少个成员</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zcount key score1 score2</span><br></pre></td></tr></table></figure><ul><li>移除成员支持批量移除score1到 score2的分数范围</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zrem key score1 score2</span><br></pre></td></tr></table></figure><h2 id="图示-2"><a href="#图示-2" class="headerlink" title="图示"></a>图示</h2><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220909164612.png" alt="image-20220909164612162"></p><h1 id="高级-全局命令"><a href="#高级-全局命令" class="headerlink" title="高级/全局命令"></a>高级/全局命令</h1><h2 id="命令-3"><a href="#命令-3" class="headerlink" title="命令"></a>命令</h2><ul><li>查看当前数据库中有哪些键</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keys *</span><br></pre></td></tr></table></figure><ul><li>判断Key是否存在 </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exists key</span><br></pre></td></tr></table></figure><ul><li>设置key的有效期</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expire key timeout</span><br></pre></td></tr></table></figure><ul><li>查看key的有效期剩余时间（-1 表示永不过期   -2表示已过期/该键不存在）</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ttl key</span><br></pre></td></tr></table></figure><ul><li>取消Key的过期时间  -置为永不过期</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">persist key </span><br></pre></td></tr></table></figure><ul><li>删除缓存数据库  –清楚当前库中的数据-选中的是那个库</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flushdb</span><br></pre></td></tr></table></figure><ul><li>删除所有的分区中的数据  -全部删除 （风险极高）</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flushall</span><br></pre></td></tr></table></figure><ul><li>移动键值数据到指定下标的数据库中</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">move key index</span><br></pre></td></tr></table></figure><ul><li>从数据库中随机返回一个key</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">randomkey</span><br></pre></td></tr></table></figure><ul><li>表示给key 修改名称</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename oldkeyname newkeynamee</span><br></pre></td></tr></table></figure><ul><li>输出打印 （调试）</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo value</span><br></pre></td></tr></table></figure><ul><li>获取当前数据库中有多少个Key  </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dbsize</span><br></pre></td></tr></table></figure><ul><li>配置信息</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config get * </span><br></pre></td></tr></table></figure><ul><li>系统信息</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">info</span><br></pre></td></tr></table></figure><h2 id="图示-3"><a href="#图示-3" class="headerlink" title="图示"></a>图示</h2><p>info<img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220909165457.png" alt="image-20220909165457438"></p>]]></content>
      
      
      <categories>
          
          <category> Redis基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ssm框架</title>
      <link href="/blog/2022/04/17/ssm%E6%A1%86%E6%9E%B6/"/>
      <url>/blog/2022/04/17/ssm%E6%A1%86%E6%9E%B6/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>spring-mvc4</title>
      <link href="/blog/2022/04/14/spring-mvc4/"/>
      <url>/blog/2022/04/14/spring-mvc4/</url>
      
        <content type="html"><![CDATA[<h1 id="文件的上传与下载"><a href="#文件的上传与下载" class="headerlink" title="文件的上传与下载"></a>文件的上传与下载</h1><ul><li><p>此场景引用上一篇文章代码**<a href="https://kairong6.gitee.io/2022/04/14/spring-mvc3/">spring-mvc3</a>**</p></li><li><p>此文章有且仅有一个简单案列仅供参考</p></li></ul><h1 id="引入相关jar包"><a href="#引入相关jar包" class="headerlink" title="引入相关jar包"></a>引入相关jar包</h1><ul><li>需要在pom.xml添加用于文件上传的jar包</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 文件上传与下载 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="文件配置"><a href="#文件配置" class="headerlink" title="文件配置"></a>文件配置</h1><ul><li>spring-mvc.xml需要配置上传解析器</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置文件上传解析器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="控制层"><a href="#控制层" class="headerlink" title="控制层"></a>控制层</h1><ul><li><p>在controller层下新建一个用于文件上传和下载的类</p><p>UpDownLoadController.java</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.mvc.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletOutputStream;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UpDownLoadController</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 文件上传</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> myfile</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title">upload</span><span class="params">(<span class="meta">@RequestParam(&quot;myFile&quot;)</span> MultipartFile myfile)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;进入上传控制器&quot;</span>);</span><br><span class="line">        System.out.println(myfile);</span><br><span class="line">        <span class="comment">//定义一个返回值</span></span><br><span class="line">        Map&lt;String,Object&gt; resultMap=<span class="keyword">new</span> HashMap&lt;String,Object&gt;() ;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//输入流</span></span><br><span class="line">            InputStream is = myfile.getInputStream();</span><br><span class="line">            <span class="comment">//指定一个磁盘用来存放上传的文件</span></span><br><span class="line">            String url=<span class="string">&quot;C:\\Users\\Administrator\\Desktop\\ziyuan\\&quot;</span> ;</span><br><span class="line">            <span class="comment">//创建一个文件对象</span></span><br><span class="line">            File file=<span class="keyword">new</span> File(url+myfile.getOriginalFilename()) ;</span><br><span class="line">            <span class="comment">//输出流</span></span><br><span class="line">            OutputStream os=<span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">            <span class="comment">//边读别写的过程</span></span><br><span class="line">            <span class="comment">//定义一个存放文件信息的字节数组</span></span><br><span class="line">            <span class="keyword">byte</span> []bytes=<span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="comment">//定义一个长度-判断是否继续读取数据</span></span><br><span class="line">            <span class="keyword">int</span> len=<span class="number">0</span> ;</span><br><span class="line">            <span class="keyword">while</span>(  (len=is.read(bytes)) !=-<span class="number">1</span> )&#123;</span><br><span class="line">                os.write(bytes,<span class="number">0</span>,len);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//关闭流操作</span></span><br><span class="line">            os.close();</span><br><span class="line">            is.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            resultMap.put(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;上传失败-文件不存在&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        resultMap.put(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;上传成功&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> resultMap ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 下载</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/download&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title">download</span><span class="params">(String filename, HttpServletResponse resp)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;进入下载控制器&quot;</span>);</span><br><span class="line"><span class="comment">//        double i = 10/0;</span></span><br><span class="line">        <span class="comment">//定义方法返回值-结果集</span></span><br><span class="line">        HashMap&lt;String, Object&gt; resultMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//指定提供资源的磁盘目录</span></span><br><span class="line">        String dir=<span class="string">&quot;C:\\Users\\Administrator\\Desktop\\ziyuan\\&quot;</span> ;</span><br><span class="line">        <span class="comment">//拼接该文件地址-判单该文件是否存在</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(dir + filename);</span><br><span class="line">        <span class="comment">//判断文件是否存在</span></span><br><span class="line">        <span class="keyword">if</span>(file.exists())&#123;</span><br><span class="line">            resultMap.put(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;123&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//如果存在--读取文件--响应文件--关闭流</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//创建输入流对象-读取磁盘文件</span></span><br><span class="line">                InputStream is = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">                <span class="comment">//获取一个文件输出流对象--FileOutputStream</span></span><br><span class="line">                ServletOutputStream os = resp.getOutputStream();</span><br><span class="line">                <span class="comment">//指定文件的名称</span></span><br><span class="line">                resp.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>,<span class="string">&quot;filename=&quot;</span>+filename);</span><br><span class="line">                <span class="comment">//指定文件的类型</span></span><br><span class="line"><span class="comment">//                resp.setHeader(&quot;Content-Type&quot;,&quot;application/mp4&quot;);</span></span><br><span class="line">                resp.setContentType(<span class="string">&quot;application/x-png&quot;</span>);</span><br><span class="line">                <span class="comment">//读取过程</span></span><br><span class="line">                <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">2048</span>] ;</span><br><span class="line">                <span class="keyword">int</span> len = <span class="number">0</span> ;</span><br><span class="line">                <span class="keyword">while</span>( (len=is.read(b))!=-<span class="number">1</span>)&#123;</span><br><span class="line">                    os.write(b,<span class="number">0</span>,len);</span><br><span class="line">                &#125;</span><br><span class="line"><span class="comment">//                resultMap.put(&quot;msg&quot;,&quot;文件下载成功&quot;);</span></span><br><span class="line">                <span class="comment">//关闭流</span></span><br><span class="line">                os.close();</span><br><span class="line">                is.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//如果不存在-响应-该文件不存在</span></span><br><span class="line">            resultMap.put(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;文件下载失败-文件不存在&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> resultMap ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span> ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="前端页面-jsp"><a href="#前端页面-jsp" class="headerlink" title="前端页面(jsp)"></a>前端页面(jsp)</h1><ul><li>在test1.jsp添加相关的表单和连接</li></ul><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;hr/&gt;</span><br><span class="line"></span><br><span class="line">&lt;form action=<span class="string">&quot;/upload&quot;</span> method=<span class="string">&quot;post&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;myFile&quot;</span>/&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>/&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;hr/&gt;</span><br><span class="line"></span><br><span class="line">&lt;a href=<span class="string">&quot;/download?filename=1.png&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;下载资源&lt;/a&gt;</span><br></pre></td></tr></table></figure><h1 id="相关测试和结果"><a href="#相关测试和结果" class="headerlink" title="相关测试和结果"></a>相关测试和结果</h1><ul><li>再浏览地址栏输入localhost:8081/jsp/test1.jsp</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220417193021.png" alt="image-20220417193021262"></p><ul><li><p>就测试接过而言上传文件支持多个类型(.jpg/.png/.mp4等)</p></li><li><p>下载资源需要注意在控制层指定被下载资源的名称和类型</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 上传和下载 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring-mvc3</title>
      <link href="/blog/2022/04/14/spring-mvc3/"/>
      <url>/blog/2022/04/14/spring-mvc3/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-mvc之json数据"><a href="#Spring-mvc之json数据" class="headerlink" title="Spring-mvc之json数据"></a>Spring-mvc之json数据</h1><ul><li>现如今前端最常用的是json数据</li><li>而后端的数据一般非json格式</li><li>所以需要使用工具类或注解使得后端返回前端之前将数据转成json格式</li><li>在spring-mvc框架中则是使用注解最为方便</li></ul><h1 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h1><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220414190750.png" alt="image-20220414190750057"></p><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><h2 id="引入jar包"><a href="#引入jar包" class="headerlink" title="引入jar包"></a>引入jar包</h2><p>pom.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.kairong<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-mvc2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- spring --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--spring-mvc的引入会自动引入其他相关的两个jar包--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.8.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 测试相关 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- servlet --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- json --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--jackson-databind的引入会自动引入其他相关的两个jar包--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- tomcat插件控制 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--端口控制--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">port</span>&gt;</span>8081<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--项目路径控制意味着http://localhost:8080/--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">path</span>&gt;</span>/<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--编码，解决get请求乱码--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">uriEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">uriEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- maven插件控制 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="创建spring核心配置文件"><a href="#创建spring核心配置文件" class="headerlink" title="创建spring核心配置文件"></a>创建spring核心配置文件</h2><p>bean.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--IOC DI 注解扫描器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;cn.kairong.mvc.controller&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>spring-mvc.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--关联 bean.xml--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;classpath:bean.xml&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 支持mvc注解驱动 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置视图解析器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span>  <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;WEB-INF/views/&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="配置web-xml"><a href="#配置web-xml" class="headerlink" title="配置web.xml"></a>配置web.xml</h2><ul><li>与前文不同的是servlet拦截规则改为**/**，并且加了一个请求过滤器</li></ul><p>web.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">web-app</span> <span class="meta-keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置请求过滤器，编码格式设为UTF-8，避免中文乱码 ,解决post请求的乱码--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- spring MVC的框架所封装的servlet进行注册 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- spring MVC的配置文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 下面值小一点比较合适，会优先加载（在tomcat启动时就初始化），防止前端请求抵达后才进行初始化从而导致响应时间过长进而降低客户端体验 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--数字决定加载顺序--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      拦截规则</span></span><br><span class="line"><span class="comment">      设置*.do则只有后缀为.do的请求才能到达控制器</span></span><br><span class="line"><span class="comment">      设置/则无拦截规则</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="实体类-entity"><a href="#实体类-entity" class="headerlink" title="实体类(entity)"></a>实体类(entity)</h1><p>Book.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.mvc.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAuthor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> author;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAuthor</span><span class="params">(String author)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.author = author;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Book&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, author=&#x27;&quot;</span> + author + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="控制层-controller"><a href="#控制层-controller" class="headerlink" title="控制层(controller)"></a>控制层(controller)</h1><p>JsonController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.mvc.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.kairong.mvc.entity.Book;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/getJson&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title">getJson</span><span class="params">()</span></span>&#123;</span><br><span class="line">        HashMap&lt;String, Object&gt; resultMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        resultMap.put(<span class="string">&quot;code&quot;</span>,<span class="string">&quot;200&quot;</span>);</span><br><span class="line">        resultMap.put(<span class="string">&quot;message&quot;</span>,<span class="string">&quot;成功&quot;</span>);</span><br><span class="line">        Book book = <span class="keyword">new</span> Book();</span><br><span class="line">        book.setId(<span class="number">1</span>);</span><br><span class="line">        book.setName(<span class="string">&quot;西游记&quot;</span>);</span><br><span class="line">        book.setAuthor(<span class="string">&quot;ckr&quot;</span>);</span><br><span class="line">        resultMap.put(<span class="string">&quot;data&quot;</span>,book);</span><br><span class="line">        <span class="keyword">return</span> resultMap;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//接受前端的单个字段数据或数组</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/getreq.do&quot;)</span></span><br><span class="line">    <span class="comment">//@RequestParam指定前端的数据字段名的值由后面定义的字段名接受</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title">getReq</span><span class="params">(<span class="meta">@RequestParam(&quot;studentusername&quot;)</span> String uname, <span class="meta">@RequestParam(&quot;studentuserpassword&quot;)</span> String password)</span></span>&#123;</span><br><span class="line">        System.out.println(uname+<span class="string">&quot;---&quot;</span>+password);</span><br><span class="line">        HashMap&lt;String, Object&gt; resultMap = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line">        resultMap.put(<span class="string">&quot;uname&quot;</span>,uname);</span><br><span class="line">        resultMap.put(<span class="string">&quot;password&quot;</span>,password);</span><br><span class="line">        <span class="keyword">return</span> resultMap ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//接受前端的单个集合</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/getreq2.do&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title">getReq2</span><span class="params">(String[] hobby)</span></span>&#123;</span><br><span class="line">        HashMap&lt;String, Object&gt; resultMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        System.out.println(Arrays.toString(hobby));</span><br><span class="line">        resultMap.put(<span class="string">&quot;data&quot;</span>, Arrays.toString(hobby));</span><br><span class="line">        <span class="keyword">return</span> resultMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//接受前端的数组数据</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/reqget3.do&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title">getReq3</span><span class="params">(Book book)</span> </span>&#123;</span><br><span class="line"><span class="comment">//        //转换乱码的字符串-底层方法</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;乱码：&quot;+book);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        String uname = book.getName();</span></span><br><span class="line"><span class="comment">//        String uauthor = book.getAuthor();</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        try &#123;</span></span><br><span class="line"><span class="comment">//            //处理uname,需要知道前端的编码集，在这里是tomcat里配置的编码集就是前端的编码集</span></span><br><span class="line"><span class="comment">//            byte[] bytes = uname.getBytes(&quot;ISO-8859-1&quot;);//需要知道并指定前端的编码集</span></span><br><span class="line"><span class="comment">////            byte[] bytes = uname.getBytes(&quot;GBK&quot;);</span></span><br><span class="line"><span class="comment">//            uname = new String(bytes, &quot;utf-8&quot;);//转换后的编码集</span></span><br><span class="line"><span class="comment">//            book.setName(uname);</span></span><br><span class="line"><span class="comment">//            //处理uauthor</span></span><br><span class="line"><span class="comment">//            byte[] uauthorBytes = uauthor.getBytes(&quot;ISO-8859-1&quot;);</span></span><br><span class="line"><span class="comment">//            uauthor = new String(uauthorBytes, &quot;utf-8&quot;);//转换后的编码集</span></span><br><span class="line"><span class="comment">//            book.setAuthor(uauthor);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;转换之后&quot;+book);</span></span><br><span class="line"><span class="comment">//        &#125; catch (UnsupportedEncodingException e) &#123;</span></span><br><span class="line"><span class="comment">//            e.printStackTrace();</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"></span><br><span class="line">        HashMap&lt;String, Object&gt; resultMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        resultMap.put(<span class="string">&quot;data&quot;</span>,book);</span><br><span class="line">        <span class="keyword">return</span> resultMap ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="前端页面-jsp"><a href="#前端页面-jsp" class="headerlink" title="前端页面(jsp)"></a>前端页面(jsp)</h1><p>test1.jsp</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> isELIgnored=<span class="string">&quot;false&quot;</span>%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;jsp测试页面&lt;/h1&gt;</span><br><span class="line">    </span><br><span class="line">&lt;form action=<span class="string">&quot;/getreq.do&quot;</span> method=<span class="string">&quot;get&quot;</span>&gt;</span><br><span class="line">    名称：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;studentusername&quot;</span>/&gt;&lt;br/&gt;</span><br><span class="line">    密码：&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;studentuserpassword&quot;</span> /&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>/&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;hr/&gt;</span><br><span class="line"></span><br><span class="line">&lt;form action=<span class="string">&quot;/getreq2.do&quot;</span> method=<span class="string">&quot;get&quot;</span>&gt;</span><br><span class="line">    游泳 &lt;input type=<span class="string">&quot;checkbox&quot;</span> value=<span class="string">&quot;游泳&quot;</span> name=<span class="string">&quot;hobby&quot;</span> /&gt;</span><br><span class="line">    下棋 &lt;input type=<span class="string">&quot;checkbox&quot;</span> value=<span class="string">&quot;下棋&quot;</span> name=<span class="string">&quot;hobby&quot;</span>/&gt;</span><br><span class="line">    跑步 &lt;input type=<span class="string">&quot;checkbox&quot;</span> value=<span class="string">&quot;跑步&quot;</span> name=<span class="string">&quot;hobby&quot;</span>/&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>/&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">    </span><br><span class="line">&lt;hr/&gt;</span><br><span class="line">    </span><br><span class="line">&lt;form action=<span class="string">&quot;/reqget3.do&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    用户id &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;id&quot;</span>/&gt;</span><br><span class="line">    图书名称&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>/&gt;</span><br><span class="line">    图书作者&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;author&quot;</span>/&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>/&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h1 id="相关测试以及结果"><a href="#相关测试以及结果" class="headerlink" title="相关测试以及结果"></a>相关测试以及结果</h1><h2 id="测试一（返回Json）"><a href="#测试一（返回Json）" class="headerlink" title="测试一（返回Json）"></a>测试一（返回Json）</h2><ul><li><p>前端不携带数据向后端发送请求</p></li><li><p>测试JsonController.java的getJson方法</p></li><li><p>利用@ResponseBody注解使得该方法返回的数据转成json格式</p></li></ul><h3 id="测试方法"><a href="#测试方法" class="headerlink" title="测试方法"></a>测试方法</h3><ul><li>在浏览器地址上输入localhost:8081/getJson</li></ul><h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><ul><li>成功返回一组Json数据符合控制器的返回要求</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220414210725.png" alt="image-20220414210725545"></p><h2 id="测试二（单个数据）"><a href="#测试二（单个数据）" class="headerlink" title="测试二（单个数据）"></a>测试二（单个数据）</h2><ul><li><p>前端请求方式为get</p></li><li><p>前端携带数据向后端发送请求</p></li><li><p>测试JsonController.java的getReq方法</p></li><li><p>利用@RequestParam注解接受前端携带的数据</p></li></ul><h3 id="测试方法-1"><a href="#测试方法-1" class="headerlink" title="测试方法"></a>测试方法</h3><ul><li>在在浏览器地址上输入localhost:8081/jsp/test1.jsp</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220414212625.png" alt="image-20220414212625830"></p><h3 id="结果-1"><a href="#结果-1" class="headerlink" title="结果"></a>结果</h3><ul><li>输入需要提交的数据</li><li>请求所携带的数据</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220414213028.png" alt="image-20220414213028048"></p><ul><li>跳转如下界面</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220414213058.png" alt="image-20220414213058306"></p><h2 id="测试三（数据集合）"><a href="#测试三（数据集合）" class="headerlink" title="测试三（数据集合）"></a>测试三（数据集合）</h2><ul><li><p>前端请求方式为get</p></li><li><p>前端携带数据集合向后端发送请求</p></li><li><p>测试JsonController.java的getReq2方法</p></li><li><p>利用String[]类型接受前端携带的数据集合</p></li></ul><h3 id="测试方法-2"><a href="#测试方法-2" class="headerlink" title="测试方法"></a>测试方法</h3><ul><li>在浏览器地址上输入localhost:8081/jsp/test1.jsp</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220414213329.png" alt="image-20220414213329036"></p><h3 id="结果-2"><a href="#结果-2" class="headerlink" title="结果"></a>结果</h3><ul><li>勾选需要提交的数据</li><li>请求所携带的数据</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220414213553.png" alt="image-20220414213553427"></p><ul><li>跳转如下界面</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220414213620.png" alt="image-20220414213620837"></p><h2 id="测试四（数组数据）"><a href="#测试四（数组数据）" class="headerlink" title="测试四（数组数据）"></a>测试四（数组数据）</h2><ul><li><p>前端请求方式为post</p></li><li><p>前端携带数组数据向后端发送请求</p></li><li><p>测试JsonController.java的getReq3方法</p></li><li><p>利用Book(实体类)类型接受前端携带的数据集合</p></li></ul><h3 id="测试方法-3"><a href="#测试方法-3" class="headerlink" title="测试方法"></a>测试方法</h3><ul><li>在浏览器地址上输入localhost:8081/jsp/test1.jsp</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220414214007.png" alt="image-20220414214007119"></p><h3 id="结果-3"><a href="#结果-3" class="headerlink" title="结果"></a>结果</h3><ul><li>输入需要提交的数据</li><li>请求所携带的数据</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220414214503.png" alt="image-20220414214503218"></p><ul><li>跳转如下界面</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220414214524.png" alt="image-20220414214524565"></p><h1 id="前端请求方法-get-post"><a href="#前端请求方法-get-post" class="headerlink" title="前端请求方法(get,post)"></a>前端请求方法(get,post)</h1><ul><li>在上文中在前端页面中前两个from表单中使用get请求方法</li><li>最后一个则是使用post请求，那么两者的使用场景具体什么呢</li></ul><h2 id="浅谈区别"><a href="#浅谈区别" class="headerlink" title="浅谈区别"></a>浅谈区别</h2><ul><li><p>最直观的区别就是GET把参数包含在<strong>请求头</strong>中，POST通过<strong>请求体</strong>传递参数。</p></li><li><p>GET在浏览器回退时是无害的，而POST会再次提交请求。 </p></li><li><p>GET产生的URL地址可以被Bookmark，而POST不可以。</p></li><li><p>GET请求会被浏览器主动cache，而POST不会，除非手动设置。</p></li><li><p>GET请求只能进行url编码，而POST支持多种编码方式。</p></li><li><p>GET请求参数会被完整保留在浏览器历史记录里，而POST中的参数不会被保留。</p></li><li><p>GET请求在URL中传送的参数是有长度限制的，而POST么有。</p></li><li><p>对参数的数据类型，GET只接受ASCII字符，而POST没有限制。</p></li><li><p>GET比POST更不安全，因为参数直接暴露在URL上，所以不能用来传递敏感信息。</p></li><li><p>GET参数通过URL传递，POST放在Request body中。</p></li></ul><h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><table><thead><tr><th align="center">操作方式</th><th align="center">数据位置</th><th align="center">明文密文</th><th align="center">数据安全</th><th align="center">长度限制</th><th align="center">应用场景</th></tr></thead><tbody><tr><td align="center">GET</td><td align="center">HTTP包头</td><td align="center">明文</td><td align="center">不安全</td><td align="center">长度较小</td><td align="center">查询数据</td></tr><tr><td align="center">POST</td><td align="center">HTTP正文</td><td align="center">可明可密</td><td align="center">安全</td><td align="center">支持较大数据传输</td><td align="center">修改数据</td></tr></tbody></table><h1 id="乱码问题"><a href="#乱码问题" class="headerlink" title="乱码问题"></a>乱码问题</h1><h2 id="Get"><a href="#Get" class="headerlink" title="Get"></a>Get</h2><ul><li>在pom.xml文件中tomcat配置加上</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uriEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">uriEncoding</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Post"><a href="#Post" class="headerlink" title="Post"></a>Post</h2><ul><li>在web.xml配置请求过滤器</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置请求过滤器，编码格式设为UTF-8，避免中文乱码 ,解决post请求的乱码--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="底层解决"><a href="#底层解决" class="headerlink" title="底层解决"></a>底层解决</h2><ul><li>get和post均适用</li><li>原理是在业务层上讲后端接受的数据进行字符编码集的转换</li><li>使用方法见JsonController.java中的getReq3方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//转换乱码的字符串-底层方法</span></span><br><span class="line">        System.out.println(<span class="string">&quot;乱码：&quot;</span>+book);</span><br><span class="line"></span><br><span class="line">        String uname = book.getName();</span><br><span class="line">        String uauthor = book.getAuthor();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//处理uname,需要知道前端的编码集，在这里是tomcat里配置的编码集就是前端的编码集</span></span><br><span class="line"><span class="comment">//            byte[] bytes = uname.getBytes(&quot;ISO-8859-1&quot;);//需要知道并指定前端的编码集</span></span><br><span class="line">            <span class="keyword">byte</span>[] bytes = uname.getBytes(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            uname = <span class="keyword">new</span> String(bytes, <span class="string">&quot;utf-8&quot;</span>);<span class="comment">//转换后的编码集</span></span><br><span class="line">            book.setName(uname);</span><br><span class="line">            <span class="comment">//处理uauthor</span></span><br><span class="line">            <span class="keyword">byte</span>[] uauthorBytes = uauthor.getBytes(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            uauthor = <span class="keyword">new</span> String(uauthorBytes, <span class="string">&quot;utf-8&quot;</span>);<span class="comment">//转换后的编码集</span></span><br><span class="line">            book.setAuthor(uauthor);</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;转换之后&quot;</span>+book);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mvc-json </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring-mvc2</title>
      <link href="/blog/2022/04/12/spring-mvc2/"/>
      <url>/blog/2022/04/12/spring-mvc2/</url>
      
        <content type="html"><![CDATA[<h1 id="转发和重定向"><a href="#转发和重定向" class="headerlink" title="转发和重定向"></a>转发和重定向</h1><h2 id="表面区别"><a href="#表面区别" class="headerlink" title="表面区别"></a>表面区别</h2><ul><li><p>从地址栏显示来说</p><ul><li>forward是服务器请求资源,服务器直接访问目标地址的URL,把那个URL的响应内容读取过来,然后把这些内容再发给浏览器.浏览器根本不知道服务器发送的内容从哪里来的,所以它的地址栏还是原来的地址.</li><li>redirect是服务端根据逻辑,发送一个状态码,告诉浏览器重新去请求那个地址.所以地址栏显示的是新的URL.</li></ul></li><li><p>从数据共享来说</p><ul><li>forward:转发页面和转发到的页面可以共享request里面的数据.</li><li>redirect:不能共享数据.</li></ul></li><li><p>从运用地方来说</p><ul><li>forward:一般用于用户登陆的时候,根据角色转发到相应的模块.</li><li>redirect:一般用于用户注销登陆时返回主页面和跳转到其它的网站等</li></ul></li><li><p>从效率来说</p><ul><li>forward:高.</li><li>redirect:低.</li></ul></li></ul><h2 id="本质区别"><a href="#本质区别" class="headerlink" title="本质区别"></a>本质区别</h2><h3 id="解释一"><a href="#解释一" class="headerlink" title="解释一"></a>解释一</h3><ul><li><p>一句话，转发是服务器行为，重定向是客户端行为。</p></li><li><p>转发过程：客户浏览器发送http请求—-》web服务器接受此请求–》调用内部的一个方法在容器内部完成请求处理和转发动作—-》将目标资源发送给客户;在这里，转发的路径必须是同一个web容器下的url，其不能转向到其他的web路径上去，中间传递的是自己的容器内的request。在客户浏览器路径栏显示的仍然是其第一次访问的路径，也就是说客户是感觉不到服务器做了转发的。转发行为是浏览器只做了一次访问请求。</p></li><li><p>重定向过程：客户浏览器发送http请求—-》web服务器接受后发送302状态码响应及对应新的location给客户浏览器–》客户浏览器发现是302响应，则自动再发送一个新的http请求，请求url是新的location地址—-》服务器根据此请求寻找资源并发送给客户。在这里 location可以重定向到任意URL，既然是浏览器重新发出了请求，则就没有什么request传递的概念了。在客户浏览器路径栏显示的是其重定向的路径，客户可以观察到地址的变化的。重定向行为是浏览器做了至少两次的访问请求的。</p></li></ul><h3 id="解释二"><a href="#解释二" class="headerlink" title="解释二"></a>解释二</h3><ul><li><p>重定向，其实是两次request,第一次，客户端request A,服务器响应，并response回来，告诉浏览器，你应该去B。这个时候IE可以</p><p>到地址变了，而且历史的回退按钮也亮了。重定向可以访问自己web应用以外的资源。在重定向的过程中，传输的信息会被丢失。</p></li><li><p>例子：请求转发是服务器内部把对一个request/response的处理权，移交给另外一个端口，对于客户端而言，它只知道自己最早请求的那个A，而不知道中间的B，甚至C、D。 传输的信息不会丢失。</p></li></ul><h3 id="解释三"><a href="#解释三" class="headerlink" title="解释三"></a>解释三</h3><ul><li>转发是服务器行为，重定向是客户端行为。</li></ul><h2 id="内部机制区别"><a href="#内部机制区别" class="headerlink" title="内部机制区别"></a>内部机制区别</h2><ul><li><p> 请求转发只能将请求转发给同一个WEB应用中的组件，而重定向还可以重新定向到同一站点不同应用程序中的资源，甚至可以定向到一绝对的URL。</p></li><li><p>重定向可以看见目标页面的URL，转发只能看见第一次访问的页面URL，以后的工作都是有服务器来做的。</p></li><li><p>请求响应调用者和被调用者之间共享相同的request对象和response对象，重定向调用者和被调用者属于两个独立访问请求和响应过程。</p></li><li><p>重定向跳转后必须加上return，要不然页面虽然跳转了，但是还会执行跳转后面的语句，转发是执行了跳转页面，下面的代码就不会在执行了。</p></li></ul><h2 id="实例应用"><a href="#实例应用" class="headerlink" title="实例应用"></a>实例应用</h2><ul><li>代码续集上一篇文章<a href="https://kairong6.gitee.io/2022/04/12/spring-mvc1/">spring-mvc1</a></li></ul><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><ul><li>在webapp目录下构建如图目录结构以及jsp文件</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220413013227.png" alt="image-20220413013227195"></p><ul><li>test1.jsp</li></ul><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> isELIgnored=<span class="string">&quot;false&quot;</span>%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;tes1.jsp&lt;/h1&gt;</span><br><span class="line">$&#123;key1&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><ul><li>test2.jsp</li></ul><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> isELIgnored=<span class="string">&quot;false&quot;</span>%&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;one.jps&lt;/h1&gt;</span><br><span class="line">$&#123;key1&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h3 id="代码编辑"><a href="#代码编辑" class="headerlink" title="代码编辑"></a>代码编辑</h3><ul><li><p>在FirstController.java中继续进行编辑</p><p>FirstController.java</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.springmvc.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FirstController</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 转发</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/one.do&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">get1</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;进入控制器！FirstController&quot;</span>);</span><br><span class="line">        <span class="comment">//springmvc实现传统方式的转发</span></span><br><span class="line">        request.setAttribute(<span class="string">&quot;key1&quot;</span>,<span class="string">&quot;传统方式携带的数据&quot;</span>);</span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;forward:jsp/test1.jsp&quot;</span>).forward(request,response);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/two.do&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">get3</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;进入控制器！TwoController&quot;</span>);</span><br><span class="line">        <span class="comment">//springmvc特有的方式实现转发</span></span><br><span class="line">        ModelAndView mav=<span class="keyword">new</span> ModelAndView() ;</span><br><span class="line">        mav.setViewName(<span class="string">&quot;forward:jsp/test1.jsp&quot;</span>);</span><br><span class="line"><span class="comment">//        mav.setViewName(&quot;test2&quot;);</span></span><br><span class="line">        mav.addObject(<span class="string">&quot;key1&quot;</span>,<span class="string">&quot;springmvc特有的方式携带的数据&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mav;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 重定向</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/three.do&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">get4</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;进入控制器！ThreeController&quot;</span>);</span><br><span class="line">        <span class="comment">//传统方式的重定向</span></span><br><span class="line">        request.setAttribute(<span class="string">&quot;key1&quot;</span>,<span class="string">&quot;重定向传统方式携带的数据&quot;</span>);</span><br><span class="line">        request.getSession().setAttribute(<span class="string">&quot;key1&quot;</span>,<span class="string">&quot;重定向传统方式携带的数据存放在session作用域中&quot;</span>);</span><br><span class="line"><span class="comment">//        response.sendRedirect(&quot;https://www.baidu.com/&quot;);</span></span><br><span class="line">        response.sendRedirect(<span class="string">&quot;jsp/test1.jsp&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/four.do&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">get</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;进入控制器！FourController&quot;</span>);</span><br><span class="line">        <span class="comment">//springmvc使用特有重定向方式携带数据跳转</span></span><br><span class="line">        ModelAndView mav= <span class="keyword">new</span> ModelAndView() ;</span><br><span class="line">        mav.addObject(<span class="string">&quot;key1&quot;</span>,<span class="string">&quot;springmvc特有的重定向方式携带的数据&quot;</span>);</span><br><span class="line">        request.getSession().setAttribute(<span class="string">&quot;key1&quot;</span>,<span class="string">&quot;springmvc特有的重定向方式携带的数据放在session作用域中&quot;</span>);</span><br><span class="line">        mav.setViewName(<span class="string">&quot;redirect:jsp/test1.jsp&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mav;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>相关测试以及结果</p><ul><li><p>分别在浏览器地址栏输入以下地址</p><ul><li>localhost:8081/one.do</li><li>localhost:8081/two.do</li><li>localhost:8081/three.do</li><li>localhost:8081/four.do</li></ul></li><li><p>浏览器页面会跳转到test1.jsp并成功将后端发送的数据显示在前端</p></li></ul><h3 id="地址路径优化"><a href="#地址路径优化" class="headerlink" title="地址路径优化"></a>地址路径优化</h3><ul><li><p>考虑到如果jsp资源路径过长，那么会对程序员不友好</p></li><li><p>于是可以在spring核心配置文件spring-mvc添加jsp视图解析器</p></li><li><p>需要注意的是该解析器只能使用spring-mvc特有的转发</p></li><li><p>并且目标路径不能带上<strong>forward:</strong></p><p>spring-mvc.xml</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--关联 bean.xml--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;classpath:bean.xml&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置视图解析器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span>  <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;WEB-INF/views/&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h4><ul><li>在FristController.java的<strong>get2</strong>方法中将如下第一行代码替换成第二行</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mav.setViewName(&quot;forward:jsp/test1.jsp&quot;); </span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mav.setViewName(<span class="string">&quot;test2&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>分别在浏览器地址栏输入localhost:8081/two.do</li><li>浏览器页面会跳转到test1.jsp并成功将后端发送的数据显示在前端</li></ul>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mvc 转发和重定向 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring-mvc1</title>
      <link href="/blog/2022/04/12/spring-mvc1/"/>
      <url>/blog/2022/04/12/spring-mvc1/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-mvc"><a href="#Spring-mvc" class="headerlink" title="Spring-mvc"></a>Spring-mvc</h1><ul><li>是一个spring提供的前后端对接的框架</li><li>适用于spring框架的业务流程</li></ul><h2 id="执行流程"><a href="#执行流程" class="headerlink" title="执行流程"></a>执行流程</h2><ol><li>用户点击某个请求路径，发起一个 HTTP request 请求，该请求会被提交到 DispatcherServlet（前端控制器）,</li><li>由 DispatcherServlet 请求一个或多个 HandlerMapping（处理器映射器），并返回一个执行链（HandlerExecutionChain）</li><li>DispatcherServlet 将执行链返回的 Handler 信息发送给 HandlerAdapter（处理器适配器）</li><li>HandlerAdapter 根据 Handler 信息找到并执行相应的 Handler（常称为 Controller）</li><li>Handler 执行完毕后会返回给 HandlerAdapter 一个 ModelAndView 对象（Spring MVC的底层对象，包括 Model 数据模型和 View 视图信息）</li><li>HandlerAdapter 接收到 ModelAndView 对象后，将其返回给 DispatcherServlet </li><li>DispatcherServlet 接收到 ModelAndView 对象后，会请求 ViewResolver（视图解析器）对视图进行解析</li><li>ViewResolver 根据 View 信息匹配到相应的视图结果，并返回给 DispatcherServlet</li><li>DispatcherServlet 接收到具体的 View 视图后，进行视图渲染，将 Model 中的模型数据填充到 View 视图中的 request 域，生成最终的 View（视图）</li></ol><p>视图负责将结果显示到浏览器（客户端）</p><h2 id="执行流程图"><a href="#执行流程图" class="headerlink" title="执行流程图"></a>执行流程图</h2><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220412214512.png" alt="Spring MVC执行流程"></p><h2 id="Spring-MVC接口"><a href="#Spring-MVC接口" class="headerlink" title="Spring MVC接口"></a>Spring MVC接口</h2><ul><li>Spring MVC 涉及到的组件有 DispatcherServlet（前端控制器）、HandlerMapping（处理器映射器）、HandlerAdapter（处理器适配器）、Handler（处理器）、ViewResolver（视图解析器）和 View（视图）。下面对各个组件的功能说明如下。</li></ul><h4 id="1）DispatcherServlet"><a href="#1）DispatcherServlet" class="headerlink" title="1）DispatcherServlet"></a>1）DispatcherServlet</h4><ul><li>DispatcherServlet 是前端控制器，从图 1 可以看出，Spring MVC 的所有请求都要经过 DispatcherServlet 来统一分发。DispatcherServlet 相当于一个转发器或中央处理器，控制整个流程的执行，对各个组件进行统一调度，以降低组件之间的耦合性，有利于组件之间的拓展。</li></ul><h4 id="2）HandlerMapping"><a href="#2）HandlerMapping" class="headerlink" title="2）HandlerMapping"></a>2）HandlerMapping</h4><ul><li>HandlerMapping 是处理器映射器，其作用是根据请求的 URL 路径，通过注解或者 XML 配置，寻找匹配的处理器（Handler）信息。</li></ul><h4 id="3）HandlerAdapter"><a href="#3）HandlerAdapter" class="headerlink" title="3）HandlerAdapter"></a>3）HandlerAdapter</h4><ul><li>HandlerAdapter 是处理器适配器，其作用是根据映射器找到的处理器（Handler）信息，按照特定规则执行相关的处理器（Handler）。</li></ul><h4 id="4）Handler"><a href="#4）Handler" class="headerlink" title="4）Handler"></a>4）Handler</h4><ul><li>Handler 是处理器，和 Java Servlet 扮演的角色一致。其作用是执行相关的请求处理逻辑，并返回相应的数据和视图信息，将其封装至 ModelAndView 对象中。</li></ul><h4 id="5）View-Resolver"><a href="#5）View-Resolver" class="headerlink" title="5）View Resolver"></a>5）View Resolver</h4><ul><li>View Resolver 是视图解析器，其作用是进行解析操作，通过 ModelAndView 对象中的 View 信息将逻辑视图名解析成真正的视图 View（如通过一个 JSP 路径返回一个真正的 JSP 页面）。</li></ul><h4 id="6）View"><a href="#6）View" class="headerlink" title="6）View"></a>6）View</h4><ul><li>View 是视图，其本身是一个接口，实现类支持不同的 View 类型（JSP、FreeMarker、Excel 等）。</li></ul><h2 id="控制器入门使用"><a href="#控制器入门使用" class="headerlink" title="控制器入门使用"></a>控制器入门使用</h2><h3 id="项目创建"><a href="#项目创建" class="headerlink" title="项目创建"></a>项目创建</h3><ul><li>使用idea创建maven-web项目</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220412220331.png" alt="image-20220412220331325"></p><ul><li>项目创建后需要构造相关系统性目录（在src目录下）</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220412224403.png" alt="image-20220412224402910"></p><ul><li>需创建如图所示的目录（接上一步骤后会弹出如图所示的待创建目录）</li><li>分别点击如图中圈中的目录</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220412224635.png" alt="image-20220412224635307"></p><h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220412221656265.png" alt="image-20220412221656265"></p><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><h4 id="引入相关jar包以及插件"><a href="#引入相关jar包以及插件" class="headerlink" title="引入相关jar包以及插件"></a>引入相关jar包以及插件</h4><p>pom.xml（注意需要刷新）</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.kairong<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-mvc1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- spring --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.8.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 测试相关 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- servlet --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- tomcat插件控制 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--端口控制--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">port</span>&gt;</span>8081<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--项目路径控制意味着http://localhost:8080/--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">path</span>&gt;</span>/<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--编码--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">uriEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">uriEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- maven插件控制 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="创建bean-xml文件"><a href="#创建bean-xml文件" class="headerlink" title="创建bean.xml文件"></a>创建bean.xml文件</h4><ul><li><p>配置内容主要用于管理后端方面的spring容器</p><p>bean.xml</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--为控制器配置id--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;/test1.do&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.kairong.springmvc.handler.FirstHandler&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        IOC DI 注解扫描器</span></span><br><span class="line"><span class="comment">        在相关包下使得相关注解生效</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;cn.kairong.springmvc.*&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="创建spring-mvc-xml文件"><a href="#创建spring-mvc-xml文件" class="headerlink" title="创建spring-mvc.xml文件"></a>创建spring-mvc.xml文件</h4><ul><li><p>配置内容主要是前后端相关的联系</p></li><li><p>创建两个spring核心配置文件的目的是将两种配置内容分开管理</p></li><li><p>最后spring-mvc.xml配置会引入bean.xml</p><p>spring-mvc.xml</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--关联 bean.xml--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;classpath:bean.xml&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>配置web.xml</p><ul><li><p>注册dispatcherServlet，dispatcherServlet是springmvc框架所封装servlet工具</p><p>web.xml</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">web-app</span> <span class="meta-keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta"> <span class="meta-string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="meta-string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- spring MVC的配置文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 这里的spring-mvc.xml对应之前创建的spring核心配置文件 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring在·-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 下面值小一点比较合适，会优先加载（在tomcat启动时就初始化），防止前端请求抵达后才进行初始化从而导致响应时间过长进而降低客户端体验 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--数字决定加载顺序--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      拦截规则</span></span><br><span class="line"><span class="comment">      只有后缀为.do的请求才能到达控制器</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="创建控制器"><a href="#创建控制器" class="headerlink" title="创建控制器"></a>创建控制器</h3><ul><li><p>创建相关的前端控制器</p><p>FistHandler.java</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.springmvc.handler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.mvc.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FirstHandler</span> <span class="keyword">implements</span> <span class="title">Controller</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handleRequest</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;进入处理器！FirstHandler&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="相关测试以及结果"><a href="#相关测试以及结果" class="headerlink" title="相关测试以及结果"></a>相关测试以及结果</h3><h4 id="配置Tomcat服务器"><a href="#配置Tomcat服务器" class="headerlink" title="配置Tomcat服务器"></a>配置Tomcat服务器</h4><ul><li>点击左上角添加配置</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220412225716.png" alt="image-20220412225716178"></p><ul><li>点击做上级加号再点击maven</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220412225930.png" alt="image-20220412225930381"></p><ul><li>在命令行写入tomcat7:run，然后点击应用</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220412230056.png" alt="image-20220412230056498"></p><h4 id="在浏览器上测试"><a href="#在浏览器上测试" class="headerlink" title="在浏览器上测试"></a>在浏览器上测试</h4><ul><li>在浏览器的地址栏输入localhost:8081/test1.do</li><li>注意地址栏里端口号8081是你在pom.xml文件中给tomcat配置的启动端口</li></ul><h4 id="输出结果"><a href="#输出结果" class="headerlink" title="输出结果"></a>输出结果</h4><ul><li><p>客户端（前端），跳转到空白页面</p></li><li><p>服务端（后端），控制台打印如下</p></li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220412231121.png" alt="image-20220412231121752"></p><h3 id="使用注解方式"><a href="#使用注解方式" class="headerlink" title="使用注解方式"></a>使用注解方式</h3><h4 id="创建控制器-1"><a href="#创建控制器-1" class="headerlink" title="创建控制器"></a>创建控制器</h4><ul><li><p>使用注解方式实现控制器(@Controller,@RequestMapping)</p></li><li><p>@Controller用来将该类定义为前端控制器并交给spring容器管理</p></li><li><p>@RequestMapping用来指定前端请求后端该方法的请求路径，具有映射关系</p></li><li><p>注意需要在spring核心配置文件中配置注解扫描器（见bean.xml）</p><p>FristController.java</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.springmvc.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FirstController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/one.do&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">get</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;进入控制器！FirstController&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="相关测试以及结果-1"><a href="#相关测试以及结果-1" class="headerlink" title="相关测试以及结果"></a>相关测试以及结果</h4><ul><li>在浏览器地址栏输入localhost:8081/one.do</li><li>前端跳转至空白页面</li><li>后端控制台输出如下图</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220412232519.png" alt="image-20220412232519233"></p>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mvc入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring-aop</title>
      <link href="/blog/2022/04/07/spring-aop/"/>
      <url>/blog/2022/04/07/spring-aop/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-Aop的应用"><a href="#Spring-Aop的应用" class="headerlink" title="Spring-Aop的应用"></a>Spring-Aop的应用</h1><ul><li>面向切面编程</li><li>代理模式的升级版</li><li>对业务类的事务增强更为便捷</li><li>利用spring的核心文件的配置or注解来实现aop操作</li><li>以<a href="https://kairong6.gitee.io/2022/04/05/%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/">事务管理 </a>完善后的代码为示例</li><li>以业务层的接口实现类StudentServiceImpl.java为事务增强的对象</li></ul><h2 id="构建事务增强类"><a href="#构建事务增强类" class="headerlink" title="构建事务增强类"></a>构建事务增强类</h2><ul><li>该事务内容是记录该业务类运行所耗费的时间</li><li>在util层创建符合需求的组件，也就是事务增强类</li><li>TimeUtil.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long startTime;</span><br><span class="line">    <span class="comment">//定义切点，需要构建一个无方法函数</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* cn.kairong.spring.service.impl.StudentServiceImpl.* (..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cut</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="comment">//业务执行前</span></span><br><span class="line">    <span class="meta">@Before(&quot;cut()&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getStartTime</span><span class="params">()</span></span>&#123;</span><br><span class="line">        startTime = System.currentTimeMillis();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//业务正常执行后</span></span><br><span class="line">    <span class="meta">@AfterReturning(&quot;cut()&quot;)</span></span><br><span class="line">    <span class="comment">//业务抛异常时</span></span><br><span class="line">    <span class="meta">@AfterThrowing(&quot;cut()&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">endTime</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Long endTime = System.currentTimeMillis();</span><br><span class="line">        System.out.println(endTime-startTime +<span class="string">&quot;ms&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Aop-配置方式"><a href="#Aop-配置方式" class="headerlink" title="Aop-配置方式"></a>Aop-配置方式</h2><ul><li>如何通过Aop的方式对业务对象进行事务增强</li><li>方法之一是在spring核心配置文件beans.xml中添加配置</li></ul><h3 id="需添加的代码块"><a href="#需添加的代码块" class="headerlink" title="需添加的代码块"></a>需添加的代码块</h3><ul><li>aop所需配置</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--这里引入事务增强类--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;timeUtil&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--定义一个切点，后面是事务增强的业务对象--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;cut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* cn.kairong.spring.service.impl.StudentServiceImpl.* (..))&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--befor表示在业务类执行之前，method是执行的方法--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;getStartTime&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;cut&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--after-returning表示业务类正常运行完后执行--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">&quot;endTime&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;cut&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--after-throwing表示业务类抛出异常时执行--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">&quot;endTime&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;cut&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="相关测试类以及结果"><a href="#相关测试类以及结果" class="headerlink" title="相关测试类以及结果"></a>相关测试类以及结果</h3><ul><li>测试类沿用原来的spring测试框架以及测试代码块</li><li>清空数据表内容</li><li>执行测试操作后数据表数据均成功添加</li><li>控制台输出结果如图（成功打印运行时间）</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220407222648.png" alt="image-20220407222648020"></p><h2 id="Aop-注解方式"><a href="#Aop-注解方式" class="headerlink" title="Aop-注解方式"></a>Aop-注解方式</h2><ul><li>由于beans.xml的aop配置方式显得不友好（麻烦）</li><li>因此我们应该考虑使用注解的方式</li><li>使用Aop相关的注解需要在beans,xml添加aop的注解扫描器</li></ul><h3 id="需要添加的代码块"><a href="#需要添加的代码块" class="headerlink" title="需要添加的代码块"></a>需要添加的代码块</h3><ul><li>aop注解扫描器</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--aop注解生效--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在事务增强类所需添加的注解</li><li>注解含义见上文TimeUtil.java中的注释</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut(&quot;execution(* cn.kairong.spring.service.impl.StudentServiceImpl.* (..))&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cut</span><span class="params">()</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Before(&quot;cut()&quot;)</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AfterReturning(&quot;cut()&quot;)</span></span><br><span class="line"><span class="meta">@AfterThrowing(&quot;cut()&quot;)</span></span><br></pre></td></tr></table></figure><h3 id="相关测试以及结果"><a href="#相关测试以及结果" class="headerlink" title="相关测试以及结果"></a>相关测试以及结果</h3><ul><li>测试类沿用原来的spring测试框架以及测试代码块</li><li>注释或删除掉aop的配置</li><li>清空数据表内容</li><li>执行测试操作后数据表数据均成功添加</li><li>控制台输出结果如图（成功打印运行时间）</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220407225429.png" alt="image-20220407225429388"></p>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Aop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>代理模式</title>
      <link href="/blog/2022/04/05/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"/>
      <url>/blog/2022/04/05/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="代理模式的应用"><a href="#代理模式的应用" class="headerlink" title="代理模式的应用"></a>代理模式的应用</h1><ul><li><p>对于上一章的<strong>事务管理</strong>的业务层进行代理模式的应用</p></li><li><p>建议将上一章“<a href="https://kairong6.gitee.io/2022/04/05/%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/">事务管理</a>”的代码拷贝使用，引用测试二的案列</p></li><li><p>由于业务实现类中功能以及操作并不专一，也就是不纯净，这会使得耦合性提高</p></li><li><p>对于如何解耦提高类聚性，可考虑使用代理模式</p></li><li><p>代理模式分为静态代理和动态代理（jdk动态代理以及cgLib动态代理）</p></li><li><p>所谓代理模式就是将两个模块（纯净业务实现类、事务增强类）交由第三模块处理</p></li></ul><h2 id="静态代理"><a href="#静态代理" class="headerlink" title="静态代理"></a>静态代理</h2><ul><li><p>一个业务类若需事务增强则需要一个静态代理类</p></li><li><p>业务实现类对应StudentServiceImpl2.java，事务增强类对应TrancManger.java</p></li><li><p>将StudentServiceImpl.java改编成一个真实纯净业务类StudentServiceImpl2.java（实现功能专一）</p></li><li><p>随后编写代理类StudentStaticProxy.java处理需求也就是对这个真实纯净业务类进行事务增强</p><h3 id="需要添加的类"><a href="#需要添加的类" class="headerlink" title="需要添加的类"></a>需要添加的类</h3><p>StudentServiceImpl2.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.dao.StudentDao;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Operation;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Student;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.service.StudentService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Timestamp;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentServiceImpl2</span> <span class="keyword">implements</span> <span class="title">StudentService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StudentDao studentDao ;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注册</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> student</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">register</span><span class="params">(Student student)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        studentDao.insert(student);</span><br><span class="line">        <span class="comment">//同时插入日志操作信息</span></span><br><span class="line">        Operation operation = <span class="keyword">new</span> Operation();</span><br><span class="line">        operation.setId(<span class="number">1</span>);</span><br><span class="line">        operation.setOperation(<span class="string">&quot;插入学生信息&quot;</span>);</span><br><span class="line">        operation.setOpertime(<span class="keyword">new</span> Timestamp(System.currentTimeMillis()));</span><br><span class="line">        studentDao.insert(operation);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>StudentStaticProxy.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Student;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.service.StudentService;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.util.TrancManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentStaticProxy</span> <span class="keyword">implements</span> <span class="title">StudentService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    StudentServiceImpl2 studentServiceImpl2;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    TrancManager trancManager;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">register</span><span class="params">(Student student)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            trancManager.startTranc();</span><br><span class="line">            studentServiceImpl2.register(student);</span><br><span class="line">            trancManager.commit();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            trancManager.rollBack();</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="相关测试类以及结果"><a href="#相关测试类以及结果" class="headerlink" title="相关测试类以及结果"></a>相关测试类以及结果</h3><ul><li><p>测试类使用spring测试框架</p><p>ProxyTest.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Student;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.service.impl.Proxy1;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.service.impl.StudentStaticProxy;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;/beans.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    StudentStaticProxy studentStaticProxy;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">StaticTest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        Student student = <span class="keyword">new</span> Student();</span><br><span class="line">        student.setId(<span class="number">101</span>);</span><br><span class="line">        student.setUname(<span class="string">&quot;zxc&quot;</span>);</span><br><span class="line">        student.setPassword(<span class="string">&quot;1233t&quot;</span>);</span><br><span class="line">        studentStaticProxy.register(student);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>数据表输出结果如图（输出结果无问题）</p></li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220406222444.png" alt="image-20220406222443969"></p><h2 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h2><ul><li>由于静态代理类只能一一对应，所以动态代理应运而生</li><li>一个动态代理可成为公共的代理类</li></ul><h3 id="jdk动态代理"><a href="#jdk动态代理" class="headerlink" title="jdk动态代理"></a>jdk动态代理</h3><ul><li>是jdk环境自带的动态代理模块</li><li>必须实现一个接口，业务实现类对象必须真实</li><li>测试类只能是通过接口调用业务实现类的相关参数进行jdk动态代理的测试</li><li>总而言之，是靠接口来联系业务类和事务增强类完成需求</li><li>添加jdk动态代理类实现需求</li></ul><h4 id="需要添加的类-1"><a href="#需要添加的类-1" class="headerlink" title="需要添加的类"></a>需要添加的类</h4><p>  StudentDynamicProxy.java</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Student;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.service.StudentService;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.service.impl.StudentDynamicProxy;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.service.impl.StudentStaticProxy;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;/beans.xml&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    StudentStaticProxy studentStaticProxy;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">StaticTest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        Student student = <span class="keyword">new</span> Student();</span><br><span class="line">        student.setId(<span class="number">101</span>);</span><br><span class="line">        student.setUname(<span class="string">&quot;zxc&quot;</span>);</span><br><span class="line">        student.setPassword(<span class="string">&quot;1233t&quot;</span>);</span><br><span class="line">        studentStaticProxy.register(student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    StudentDynamicProxy studentDynamicProxy;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">JdkTest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        StudentService o = (StudentService) Proxy.newProxyInstance(</span><br><span class="line">                studentDynamicProxy.getTarget().getClass().getClassLoader(),</span><br><span class="line">                studentDynamicProxy.getTarget().getClass().getInterfaces(),</span><br><span class="line">                studentDynamicProxy);</span><br><span class="line">        Student student=<span class="keyword">new</span> Student() ;</span><br><span class="line">        student.setId(<span class="number">107</span>);</span><br><span class="line">        student.setUname(<span class="string">&quot;贾宝玉&quot;</span>);</span><br><span class="line">        student.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        o.register(student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="相关测试类以及结果-1"><a href="#相关测试类以及结果-1" class="headerlink" title="相关测试类以及结果"></a>相关测试类以及结果</h4><ul><li><p>在测试类添加对应测试</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">StudentDynamicProxy studentDynamicProxy;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">JdkTest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    StudentService o = (StudentService) Proxy.newProxyInstance(</span><br><span class="line">            studentDynamicProxy.getTarget().getClass().getClassLoader(),</span><br><span class="line">            studentDynamicProxy.getTarget().getClass().getInterfaces(),</span><br><span class="line">            studentDynamicProxy);</span><br><span class="line">    Student student=<span class="keyword">new</span> Student() ;</span><br><span class="line">    student.setId(<span class="number">107</span>);</span><br><span class="line">    student.setUname(<span class="string">&quot;贾宝玉&quot;</span>);</span><br><span class="line">    student.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">    o.register(student);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>数据表输出结果如图（输出结果无问题）</p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220406234333.png" alt="image-20220406234333463"></p></li></ul><h3 id="cgLib动态代理"><a href="#cgLib动态代理" class="headerlink" title="cgLib动态代理"></a>cgLib动态代理</h3><ul><li>由spring框架提供的动态代理模块</li><li>对事物增强的业务类并没有特殊要求</li><li>自动生成代理类的父类，以便调用代理类的事务增强功能以及业务对象</li><li>也就是说业务类和事务增强类由代理类的父类进行存放以便于代理类进行功能或者参数调用</li></ul><h4 id="需要添加的类-2"><a href="#需要添加的类-2" class="headerlink" title="需要添加的类"></a>需要添加的类</h4><p>StudentCgLibProxy.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.util.TrancManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cglib.proxy.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentCgLibProxy</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(&quot;studentServiceImpl2&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Object target;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getTarget</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> target;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TrancManager trancManager;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object o, Method method, Object[] objects)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        Object obj = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            trancManager.startTranc();</span><br><span class="line">            obj = method.invoke(target, objects);</span><br><span class="line">            trancManager.commit();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            trancManager.rollBack();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="相关测试类以及结果-2"><a href="#相关测试类以及结果-2" class="headerlink" title="相关测试类以及结果"></a>相关测试类以及结果</h4><ul><li><p>在测试类添加对应测试</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">StudentCgLibProxy studentCgLibProxy;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cgLibTest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="comment">//使用cglib创建真实业务类的代理类(已经功能增强了的类对象)</span></span><br><span class="line">    Enhancer enhancer = <span class="keyword">new</span> Enhancer();</span><br><span class="line">    <span class="comment">//设置真实业务类对象所属类，也就是代理类的父类</span></span><br><span class="line">    enhancer.setSuperclass(studentCgLibProxy.getTarget().getClass());</span><br><span class="line">    <span class="comment">//公共代理类对象告诉enhancer对象要增强的功能是什么</span></span><br><span class="line">    enhancer.setCallback(studentCgLibProxy);</span><br><span class="line">    Object o = enhancer.create();</span><br><span class="line">    StudentServiceImpl2 studentServiceImpl2 = (StudentServiceImpl2) o;</span><br><span class="line">    Student student = <span class="keyword">new</span> Student();</span><br><span class="line">    student.setId(<span class="number">1104</span>);</span><br><span class="line">    student.setUname(<span class="string">&quot;dzx&quot;</span>);</span><br><span class="line">    student.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">    studentServiceImpl2.register(student);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>数据表输出结果如图（输出结果无问题）</p></li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220406234224.png" alt="image-20220406234224532"></p>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 代理模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>事务管理</title>
      <link href="/blog/2022/04/05/%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/"/>
      <url>/blog/2022/04/05/%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-事务管理"><a href="#Spring-事务管理" class="headerlink" title="Spring-事务管理"></a>Spring-事务管理</h1><h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220405204426.png" alt="image-20220405204425827"></p><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="引入相关jar包"><a href="#引入相关jar包" class="headerlink" title="引入相关jar包"></a>引入相关jar包</h3><p>pom.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring9<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.45<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.24<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="创建db-properties文件"><a href="#创建db-properties文件" class="headerlink" title="创建db.properties文件"></a>创建db.properties文件</h3><p>db.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">jdbc.driverClassName</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/spring?useUnicode=true&amp;characterEncoding=utf-8</span></span><br><span class="line"><span class="meta">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">jdbc.password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure><h3 id="创建beans-xml文件"><a href="#创建beans-xml文件" class="headerlink" title="创建beans.xml文件"></a>创建beans.xml文件</h3><p>beans.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;cn.kairong.spring.*&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--先加载到db.properties配置文件中--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;db.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:property-placeholder</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--使用Druid连接池--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;druidDataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driverClassName&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h3><p>student</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `student` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `uname` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>operation</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `student` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `uname` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="entity层"><a href="#entity层" class="headerlink" title="entity层"></a>entity层</h2><h3 id="Student-java"><a href="#Student-java" class="headerlink" title="Student.java"></a>Student.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.entity;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 与数据库表student映射的实体类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id ;</span><br><span class="line">    <span class="keyword">private</span> String uname ;</span><br><span class="line">    <span class="keyword">private</span> String password ;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUname</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> uname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUname</span><span class="params">(String uname)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.uname = uname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Operstion-java"><a href="#Operstion-java" class="headerlink" title="Operstion.java"></a>Operstion.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Timestamp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Operation</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id ;</span><br><span class="line">    <span class="keyword">private</span> String  operation ;</span><br><span class="line">    <span class="keyword">private</span> Timestamp opertime ;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getOperation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> operation;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOperation</span><span class="params">(String operation)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.operation = operation;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Timestamp <span class="title">getOpertime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> opertime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOpertime</span><span class="params">(Timestamp opertime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.opertime = opertime;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="dao层"><a href="#dao层" class="headerlink" title="dao层"></a>dao层</h2><h3 id="持久层接口"><a href="#持久层接口" class="headerlink" title="持久层接口"></a>持久层接口</h3><p>IStudentDao</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Operation;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 与用户相关的数据库操作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IStudentDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 插入学生信息到数据库中</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> student</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(Student student)</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 插入日志信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> operation</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(Operation operation)</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="持久层接口实现类"><a href="#持久层接口实现类" class="headerlink" title="持久层接口实现类"></a>持久层接口实现类</h3><p>StudentDaoImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.dao.IStudentDao;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Operation;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Student;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 是StduentDao的实现类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentDaoimpl</span> <span class="keyword">implements</span> <span class="title">IStudentDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Resource</span></span><br><span class="line"><span class="comment">//    private TrancManager trancManager ;</span></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    DruidDataSource druidDataSource;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  插入学生信息到数据库中</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> student</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(Student student)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//先获取连接  使用druid连接池</span></span><br><span class="line">        Connection connection = druidDataSource.getConnection();</span><br><span class="line"><span class="comment">//        Connection connection = trancManager.getConnection();</span></span><br><span class="line">        System.out.println(connection);</span><br><span class="line">        PreparedStatement pst = connection.prepareStatement(<span class="string">&quot;insert into student values (?,?,?)&quot;</span>);</span><br><span class="line">        pst.setInt(<span class="number">1</span>, student.getId());</span><br><span class="line">        pst.setString(<span class="number">2</span>, student.getUname());</span><br><span class="line">        pst.setString(<span class="number">3</span>, student.getPassword());</span><br><span class="line">        pst.executeUpdate();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(Operation operation)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//先获取连接  使用druid连接池</span></span><br><span class="line">        Connection connection = druidDataSource.getConnection();</span><br><span class="line"><span class="comment">//        Connection connection = trancManager.getConnection();</span></span><br><span class="line">        System.out.println(connection);</span><br><span class="line">        PreparedStatement pst = connection.prepareStatement(<span class="string">&quot;insert into operation values (?,?,?)&quot;</span>);</span><br><span class="line">        pst.setInt(<span class="number">1</span>,operation.getId());</span><br><span class="line">        pst.setString(<span class="number">2</span>,operation.getOperation());</span><br><span class="line">        pst.setTimestamp(<span class="number">3</span>,operation.getOpertime());</span><br><span class="line"><span class="comment">//        double i=1/0 ;</span></span><br><span class="line">        pst.executeUpdate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="service层"><a href="#service层" class="headerlink" title="service层"></a>service层</h2><h3 id="业务层接口"><a href="#业务层接口" class="headerlink" title="业务层接口"></a>业务层接口</h3><p>IStudentService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 学生相关的业务接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IStudentService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">register</span><span class="params">(Student student)</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="业务层接口实现类"><a href="#业务层接口实现类" class="headerlink" title="业务层接口实现类"></a>业务层接口实现类</h3><p>StudentServiceImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.dao.IStudentDao;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Operation;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Student;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.service.IStudentService;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Timestamp;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentServiceImpl</span> <span class="keyword">implements</span> <span class="title">IStudentService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IStudentDao IStudentDao;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Autowired</span></span><br><span class="line"><span class="comment">//    private TrancManager trancManager ;</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DruidDataSource druidDataSource;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注册</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> student</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">register</span><span class="params">(Student student)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//需要调用dao层的方法</span></span><br><span class="line">        <span class="comment">//插入学生信息</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            druidDataSource.getConnection();</span><br><span class="line">       <span class="comment">//有着替代druidDataSource.getConnection();的作用</span></span><br><span class="line"><span class="comment">//            trancManager.startTranc();</span></span><br><span class="line">            IStudentDao.insert(student);</span><br><span class="line">            <span class="comment">//同时插入日志操作信息</span></span><br><span class="line">            Operation operation = <span class="keyword">new</span> Operation();</span><br><span class="line">            operation.setId(<span class="number">1</span>);</span><br><span class="line">            operation.setOperation(<span class="string">&quot;插入学生信息&quot;</span>);</span><br><span class="line">            operation.setOpertime(<span class="keyword">new</span> Timestamp(System.currentTimeMillis()));</span><br><span class="line">            IStudentDao.insert(operation);</span><br><span class="line">            <span class="comment">//提交</span></span><br><span class="line"><span class="comment">//            trancManager.commit();</span></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            <span class="comment">//回滚</span></span><br><span class="line"><span class="comment">//            trancManager.rollBack();</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="util层"><a href="#util层" class="headerlink" title="util层"></a>util层</h2><ul><li><p>druid连接获取以及判断的工具类，用于解决事务管理违反原子性的问题。</p></li><li><p>原子性：在执行过程中如遇问题则会返回执行前的初始状态，若没有问题则完全执行。</p></li><li><p>拿到在beans.xml中配置的druidDataSource，并生成公共的druid连接并附加判断连接获取与否。</p><p><strong>TrancManger.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidPooledConnection;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TrancManager</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DruidDataSource druidDataSource ;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//用于存放连接的ThreadLocal保存连接</span></span><br><span class="line">    <span class="keyword">private</span> ThreadLocal&lt;Connection&gt; local=<span class="keyword">new</span> ThreadLocal&lt;Connection&gt;();</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 基于Druid连接池获取连接</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//dao方法在获取连接的时候判断是否存在该连接</span></span><br><span class="line">        <span class="keyword">if</span>(local.get() !=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> local.get() ;</span><br><span class="line">        &#125;</span><br><span class="line">        DruidPooledConnection connection = druidDataSource.getConnection();</span><br><span class="line">        local.set(connection);</span><br><span class="line">        <span class="keyword">return</span>  connection; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startTranc</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//关闭自动提交</span></span><br><span class="line">        getConnection().setAutoCommit(<span class="keyword">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">commit</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        getConnection().commit();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rollBack</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        getConnection().rollback();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="测试类以及结果"><a href="#测试类以及结果" class="headerlink" title="测试类以及结果"></a>测试类以及结果</h2><ul><li>在这里使用Spring的测试类框架</li></ul><h3 id="测试一"><a href="#测试一" class="headerlink" title="测试一"></a>测试一</h3><ul><li><p>创建测试类</p><p>SpringTest.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Student;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.service.IStudentService;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:beans.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> IStudentService studentServiceImpl;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testService</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        Student student = <span class="keyword">new</span> Student();</span><br><span class="line">        student.setId(<span class="number">107</span>);</span><br><span class="line">        student.setUname(<span class="string">&quot;秋香&quot;</span>);</span><br><span class="line">        student.setPassword(<span class="string">&quot;567890&quot;</span>);</span><br><span class="line">        studentServiceImpl.register(student);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="结果一"><a href="#结果一" class="headerlink" title="结果一"></a>结果一</h4><ul><li><p>无异常测试</p></li><li><p>控制台无报错</p></li><li><p>数据表数据结果如图</p></li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220405213721.png" alt="image-20220405213721598"></p><h4 id="结果二"><a href="#结果二" class="headerlink" title="结果二"></a>结果二</h4><ul><li><p>异常测试</p></li><li><p>清空数据表所有数据</p></li><li><p>在StudentDaoImpl.java中operation的insert函数添加异常（这里用的是除数为零的异常）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> i=<span class="number">1</span>/<span class="number">0</span> ;</span><br></pre></td></tr></table></figure></li><li><p>控制台报错情况</p></li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220405214606.png" alt="image-20220405214606644"></p><ul><li>数据表数据结果如图</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220405214756.png" alt="image-20220405214756301"></p><ul><li>存在违背原子性的问题</li><li>解决办法见测试二</li></ul><h3 id="测试二"><a href="#测试二" class="headerlink" title="测试二"></a>测试二</h3><ul><li><p>为维持原子性，需添加事务回滚函数</p></li><li><p>考虑自动事务提交的影响，需要关闭自动提交以及添加手动提交</p></li><li><p>由于代码是执行了两张表的数据添加操作，可以考虑给两个添加方式中使用同一个数据连接方法</p></li><li><p>为此在util层创建工具类实现以上需求，具体代码见util层TrancManger.java</p></li><li><p>需要将持久层实现类StudnetDaoImpl.java的DruidDataSource替换成TrancManger以及druidDataSource替换成trancManger</p></li><li><p>在业务层实现类StudentServiceImpl.java中执行上持久层里的操作</p></li><li><p>在业务层实现类需要在对应位置添加对应代码块如下,位置见StudentServiceImpl.java中的注释</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">trancManager.startTranc();</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">trancManager.commit();</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">trancManager.rollBack();</span><br></pre></td></tr></table></figure></li></ul><h4 id="结果一-1"><a href="#结果一-1" class="headerlink" title="结果一"></a>结果一</h4><ul><li><p>无异常测试</p></li><li><p>清空数据表所有数据</p></li><li><p>控制台无报错</p></li><li><p>数据表数据结果如图</p></li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220405213721.png" alt="image-20220405214756301"></p><h4 id="结果二-1"><a href="#结果二-1" class="headerlink" title="结果二"></a>结果二</h4><ul><li><p>异常测试</p></li><li><p>清空数据表所有数据</p></li><li><p>在StudentDaoImpl.java中operation的insert函数添加异常（这里用的是除数为零的异常）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> i=<span class="number">1</span>/<span class="number">0</span> ;</span><br></pre></td></tr></table></figure></li><li><p>控制台报错情况</p></li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220405214606.png" alt="image-20220405214606644"></p><ul><li>数据表数据结果如图</li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220405223146.png" alt="image-20220405223145962"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li> 最初的代码雏形中未考虑可能存在违背原子性的问题</li><li>在测试中添加异常的结果让我们猜得以发现存在的问题</li><li>思考解决办法时关注执行多个业务时所存在的共同点或者共同代码块</li><li>同时需要排除自动提交的可能性</li><li>事务的回滚同样是维持原子性的重点</li><li>利用以上需求编写符合要求的工具类</li><li>在业务层结合try-catch捕获数据连接抛出的异常即可解决违背原子性的问题</li></ul>]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 事务管理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>原生工具类Druid</title>
      <link href="/blog/2022/04/05/%E5%8E%9F%E7%94%9F%E5%B7%A5%E5%85%B7%E7%B1%BBDruid/"/>
      <url>/blog/2022/04/05/%E5%8E%9F%E7%94%9F%E5%B7%A5%E5%85%B7%E7%B1%BBDruid/</url>
      
        <content type="html"><![CDATA[<h1 id="原生工具类的相关注解"><a href="#原生工具类的相关注解" class="headerlink" title="原生工具类的相关注解"></a>原生工具类的相关注解</h1><h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220405030915.png" alt="image-20220405030914867"></p><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="引入相关jar包"><a href="#引入相关jar包" class="headerlink" title="引入相关jar包"></a>引入相关jar包</h3><p>pom.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring7<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.45<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.24<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="创建bean-xml文件"><a href="#创建bean-xml文件" class="headerlink" title="创建bean.xml文件"></a>创建bean.xml文件</h3><ul><li><p>配置注解扫描器</p><p>beans.xml</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置注解扫描器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;cn.kairong.spring.*&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="创建原生工具类"><a href="#创建原生工具类" class="headerlink" title="创建原生工具类"></a>创建原生工具类</h2><p>DruidUtil.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.PostConstruct;</span><br><span class="line"><span class="keyword">import</span> javax.annotation.PreDestroy;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DruidUtil</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> DruidDataSource druidDataSource;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DruidUtil</span><span class="params">()</span></span>&#123;</span><br><span class="line">        druidDataSource = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 自动初始化</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@PostConstruct</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        druidDataSource.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        druidDataSource.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/spring?useUnicode=true&amp;characterEncoding=utf-8&quot;</span>);</span><br><span class="line">        druidDataSource.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        druidDataSource.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;执行初始化&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> druidDataSource.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 自动销毁</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@PreDestroy</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PreDestroy</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span></span>&#123;</span><br><span class="line">        druidDataSource.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;执行关闭操作&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="相关测试类以及输出结果"><a href="#相关测试类以及输出结果" class="headerlink" title="相关测试类以及输出结果"></a>相关测试类以及输出结果</h2><h3 id="非Spring测试"><a href="#非Spring测试" class="headerlink" title="非Spring测试"></a>非Spring测试</h3><ul><li><p>工具类对象未用Spring类型注解(@Component,@PostConstruct,@PreDestroy)</p></li><li><p>因此测试类中需手动初始化以及销毁</p></li><li><p>创建测试类</p><p>DruidUtilTest.java</p></li></ul> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.kairong.spring.util.DruidUtil;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DruidUtiTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DruidUtilTest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        DruidUtil druidUtil = <span class="keyword">new</span> DruidUtil();</span><br><span class="line">        druidUtil.init();</span><br><span class="line">        Connection connection = druidUtil.getConnection();</span><br><span class="line">        System.out.println(connection);</span><br><span class="line">        druidUtil.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>控制台输出结果</p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220405031634.png" alt="image-20220405031634265"></p></li></ul><h3 id="Spring测试"><a href="#Spring测试" class="headerlink" title="Spring测试"></a>Spring测试</h3><ul><li><p>工具类对象使用Spring类型注解(@Component,@PostConstruct,@PreDestroy)</p></li><li><p>因此在测试类中无须手动初始化以及销毁，由注解而令spring框架自动化执行</p></li><li><p>创建测试类</p><p>DruidUtilTestSpring.java</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.kairong.spring.util.DruidUtil;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;/beans.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DruidUtilTestSpring</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DruidUtil druidUtil;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SpringAnnoTest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        System.out.println(druidUtil.getConnection());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>控制台输出结果</p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220405031701.png" alt="image-20220405031701857"></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 注解 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring-注解</title>
      <link href="/blog/2022/04/05/spring-%E6%B3%A8%E8%A7%A3/"/>
      <url>/blog/2022/04/05/spring-%E6%B3%A8%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-注解"><a href="#Spring-注解" class="headerlink" title="Spring-注解"></a>Spring-注解</h1><h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220405003150.png" alt="image-20220405003150600"></p><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="引入相关jar包"><a href="#引入相关jar包" class="headerlink" title="引入相关jar包"></a>引入相关jar包</h3><p>pom.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring6<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.45<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.24<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="创建beans-xml"><a href="#创建beans-xml" class="headerlink" title="创建beans.xml"></a>创建beans.xml</h3><p>beans.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--添加注解扫描器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;cn.kairong.spring.*&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="IOC-注解"><a href="#IOC-注解" class="headerlink" title="IOC-注解"></a>IOC-注解</h2><h3 id="Service-业务层"><a href="#Service-业务层" class="headerlink" title="@Service(业务层)"></a>@Service(业务层)</h3><h4 id="业务接口以及实现类"><a href="#业务接口以及实现类" class="headerlink" title="业务接口以及实现类"></a>业务接口以及实现类</h4><ul><li><p>在service层下创建IMyService接口</p><p>IMyService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IMyService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">myService</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在service层下创建对应接口实现类</p><p>MyServiceImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.service.IMyService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Service</span>注解用于业务层</span></span><br><span class="line"><span class="comment"> * 用于实现类</span></span><br><span class="line"><span class="comment"> * 若需<span class="doctag">@Service</span>生效，需要在beans.xnl配置添加注解扫描器（注意包路径）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Myserviceimpl</span> <span class="keyword">implements</span> <span class="title">IMyService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">myService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;业务实现&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="测试类以及输出结果"><a href="#测试类以及输出结果" class="headerlink" title="测试类以及输出结果"></a>测试类以及输出结果</h4><ul><li><p>创建测试类</p><p>AnnoTest.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.kairong.spring.service.impl.Myserviceimpl;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;/beans.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnoTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    Myserviceimpl myserviceimpl;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">MyServiceTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(myserviceimpl);</span><br><span class="line">        myserviceimpl.myService();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>控制台输出结果</p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220404223608.png" alt="image-20220404223608748"></p></li></ul><h3 id="Component-组件类型"><a href="#Component-组件类型" class="headerlink" title="@Component(组件类型)"></a>@Component(组件类型)</h3><h4 id="数据库连接工具类"><a href="#数据库连接工具类" class="headerlink" title="数据库连接工具类"></a>数据库连接工具类</h4><ul><li><p>创建一个连接数据库的工具类</p><p>MyJDBCUtil.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Component</span> 用户组件--让用户转成bean，交由spring容器管理</span></span><br><span class="line"><span class="comment"> * 依旧需要注解扫描</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyJDBCUtil</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/spring?useUnicode=true&amp;characterEncoding=utf-8&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="测试类以及输出结果-1"><a href="#测试类以及输出结果-1" class="headerlink" title="测试类以及输出结果"></a>测试类以及输出结果</h4><ul><li><p>在测试类中添加相关测试</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line">MyJDBCUtil myJDBCUtil;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">MyJdbcYest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    System.out.println(myJDBCUtil);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>控制台输出结果</p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220404230101.png" alt="image-20220404230101390"></p></li></ul><h3 id="Reposity-持久层"><a href="#Reposity-持久层" class="headerlink" title="@Reposity(持久层)"></a>@Reposity(持久层)</h3><h4 id="持久层接口以及实现类"><a href="#持久层接口以及实现类" class="headerlink" title="持久层接口以及实现类"></a>持久层接口以及实现类</h4><ul><li><p>在dao层下创建IMyDao接口</p><p>IMyDao.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IMyDao</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">()</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在dao层下创建IMyDaoImpl实现类</p><p>IMyDaoImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.dao.IMyDao;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Repository</span> 同用于持久层实现类</span></span><br><span class="line"><span class="comment"> * 依旧需要注解扫描</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDaoImpl</span> <span class="keyword">implements</span> <span class="title">IMyDao</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;添加数据！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;修改数据&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="测试类以及输出结果-2"><a href="#测试类以及输出结果-2" class="headerlink" title="测试类以及输出结果"></a>测试类以及输出结果</h4><ul><li><p>在测试类添加相关测试</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line">MyDaoImpl myDaoimpl;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">MyDaoTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(myDaoimpl);</span><br><span class="line">    myDaoimpl.insert();</span><br><span class="line">    myDaoimpl.update();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>控制台输出结果</p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220404231909.png" alt="image-20220404231909526"></p></li></ul><h2 id="DI-注解"><a href="#DI-注解" class="headerlink" title="DI-注解"></a>DI-注解</h2><h3 id="Value"><a href="#Value" class="headerlink" title="@Value"></a>@Value</h3><h4 id="用法注意"><a href="#用法注意" class="headerlink" title="用法注意"></a>用法注意</h4><ul><li>用于给基本类型/基本类型的封装类型String类型，添加在属性上、setter方法上</li></ul><h4 id="创建一个实体类"><a href="#创建一个实体类" class="headerlink" title="创建一个实体类"></a>创建一个实体类</h4><ul><li><p>在Student实体类用@Value赋值</p><p>Student.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value(&quot;101&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="meta">@Value(&quot;dzx&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Value(&quot;123456&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, username=&#x27;&quot;</span> + username + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, password=&#x27;&quot;</span> + password + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="测试类以及输出结果-3"><a href="#测试类以及输出结果-3" class="headerlink" title="测试类以及输出结果"></a>测试类以及输出结果</h4><ul><li><p>创建测试类</p><p>DITest.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Student;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;/beans.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DITest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    Student student;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">StudentTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>控制台输出结果</p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220404233710.png" alt="image-20220404233710746"></p></li></ul><h3 id="AutoWired"><a href="#AutoWired" class="headerlink" title="@AutoWired"></a>@AutoWired</h3><h4 id="用法注意-1"><a href="#用法注意-1" class="headerlink" title="用法注意"></a>用法注意</h4><ul><li>给自定义类型/第三方的引用类型添加依赖/赋值根据类型查找，容器中只有一个该类型的Bean ,直接将容器中的Bean注入到当前属性中。</li><li>根据类型查找时，找到多个相同类型的Bean，那么又根据名称匹配，如果能匹配到，那么直接注入，如果根据名称没有匹配到，直接报错。@Qulifter(“id/name”)跟@Autowired注解搭配使用。</li></ul><h4 id="创建一个实体类-1"><a href="#创建一个实体类-1" class="headerlink" title="创建一个实体类"></a>创建一个实体类</h4><ul><li><p>在Hobby.java中用@AutoWired进行依赖注入,注入对象则是Student.java</p><p>Hobby.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hobby</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;201&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="meta">@Value(&quot;ckr&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line"><span class="comment">//    @Qualifier(&quot;student&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Student student;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">getStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> student;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStudent</span><span class="params">(Student student)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.student = student;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hobby&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, student=&quot;</span> + student +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="测试类以及输出结果-4"><a href="#测试类以及输出结果-4" class="headerlink" title="测试类以及输出结果"></a>测试类以及输出结果</h4><ul><li><p>在测试类添加相关测试</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line">Hobby hobby;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">HobbyTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(hobby);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>控制台输出结果</p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220404235407.png" alt="image-20220404235407220"></p></li></ul><h3 id="Resource"><a href="#Resource" class="headerlink" title="@Resource"></a>@Resource</h3><h4 id="用法注意-2"><a href="#用法注意-2" class="headerlink" title="用法注意"></a>用法注意</h4><ul><li>给自定义类型/第三方的引用类型添加依赖或赋值@首先根据名称匹配，如果匹配到了该名称，那么直接注入，如果没有匹配到名称，在根据类型匹配，如果匹配到该类型的唯一的一个bean，那么直接注入。</li><li>如果匹配到了多个相同类型的Bean，直接报错。在@Resource(name=“id/name”)–如果指定了匹配的名称，如果还依然没有匹配到，就不会再按照类型匹配了，直接报错了。</li></ul><h4 id="创建一个实体类-2"><a href="#创建一个实体类-2" class="headerlink" title="创建一个实体类"></a>创建一个实体类</h4><ul><li><p>在Hobby.java中用@Resource进行依赖注入,注入对象则是Student.java</p><p>Hobby.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hobby</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;201&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="meta">@Value(&quot;ckr&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//    @Resource(name = &quot;student&quot;)</span></span><br><span class="line"><span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> Student student;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">getStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> student;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStudent</span><span class="params">(Student student)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.student = student;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hobby&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, student=&quot;</span> + student +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="测试类以及输出结果-5"><a href="#测试类以及输出结果-5" class="headerlink" title="测试类以及输出结果"></a>测试类以及输出结果</h4><ul><li><p>在测试类继续应用HobbyTest</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line">Hobby hobby;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">HobbyTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(hobby);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>控制台输出结果</p></li></ul><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220404235407.png" alt="image-20220404235407220"></p>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 注解 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring-project</title>
      <link href="/blog/2022/04/01/Spring-project/"/>
      <url>/blog/2022/04/01/Spring-project/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring框架初步使用"><a href="#Spring框架初步使用" class="headerlink" title="Spring框架初步使用"></a>Spring框架初步使用</h1><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="创建db-properties文件"><a href="#创建db-properties文件" class="headerlink" title="创建db.properties文件"></a>创建db.properties文件</h3><p>db.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">jdbc.driverClassName</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/spring?useUnicode=true&amp;characterEncoding=utf-8</span></span><br><span class="line"><span class="meta">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">jdbc.password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure><h3 id="创建beans-xml文件"><a href="#创建beans-xml文件" class="headerlink" title="创建beans.xml文件"></a>创建beans.xml文件</h3><p>beans.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;cn.kairong.spring.*&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--先加载到db.properties配置文件中--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;db.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:property-placeholder</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--使用Druid连接池--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;druidDataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driverClassName&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置StudentDaoImpl中DruidDataSource的setter注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.kairong.spring.dao.impl.StudentDaoImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;druidDataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;druidDataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置StudentServiceImpl中StudentDao的setter注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studentServiceImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.kairong.spring.service.impl.StudentServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;IStudentDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="项目目录"><a href="#项目目录" class="headerlink" title="项目目录"></a>项目目录</h2><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220401020634.png" alt="image-20220401020634639"></p><h2 id="创建实体类对象"><a href="#创建实体类对象" class="headerlink" title="创建实体类对象"></a>创建实体类对象</h2><p>Student.java(entity层)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.entity;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 与数据库表student映射的实体类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id ;</span><br><span class="line">    <span class="keyword">private</span> String uname ;</span><br><span class="line">    <span class="keyword">private</span> String password ;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUname</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> uname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUname</span><span class="params">(String uname)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.uname = uname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="创建持久层接口"><a href="#创建持久层接口" class="headerlink" title="创建持久层接口"></a>创建持久层接口</h2><p>IStudentDao.java(dao层)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Student;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 与用户相关的数据库操作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IStudentDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 插入学生信息到数据库中</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> student</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(Student student)</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="创建持久层实现类"><a href="#创建持久层实现类" class="headerlink" title="创建持久层实现类"></a>创建持久层实现类</h2><p>StudentDaoImpl(dao层)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.dao.IStudentDao;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Student;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidPooledConnection;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 是StduentDao的实现类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="comment">//@Repository注解用于持久层实现类,需要beans文件配置注解扫面器生效，主要用于spring的自动集成相当于框架自动配置了相应的bean类，同样便于spring自带的测试框架。</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentDaoImpl</span> <span class="keyword">implements</span> <span class="title">IStudentDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  插入学生信息到数据库中</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> student</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> DruidDataSource druidDataSource;</span><br><span class="line">    <span class="comment">//配置beans.xml文件实现setter注入</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDruidDataSource</span><span class="params">(DruidDataSource druidDataSource)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.druidDataSource = druidDataSource;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(Student student)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//创建连接对象</span></span><br><span class="line">        DruidPooledConnection connection = druidDataSource.getConnection();</span><br><span class="line">        PreparedStatement preparedStatement = connection.prepareStatement(<span class="string">&quot;insert into student values (?,?,?)&quot;</span>);</span><br><span class="line">        preparedStatement.setInt(<span class="number">1</span>,student.getId());</span><br><span class="line">        preparedStatement.setString(<span class="number">2</span>,student.getUname());</span><br><span class="line">        preparedStatement.setString(<span class="number">3</span>,student.getPassword());</span><br><span class="line">        preparedStatement.executeUpdate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="创建业务层接口"><a href="#创建业务层接口" class="headerlink" title="创建业务层接口"></a>创建业务层接口</h2><p>IStudentService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Student;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 学生相关的业务接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IStudentService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(Student student)</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="创建业务层实现类"><a href="#创建业务层实现类" class="headerlink" title="创建业务层实现类"></a>创建业务层实现类</h2><p>StudentServiceImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.dao.IStudentDao;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Student;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.service.IStudentService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="comment">//@Service注解用于业务层实现类，需要beans文件配置注解扫面器生效，主要用于spring的自动集成相当于框架自动配置了相应的bean类，同样便于spring自带的测试框架</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentServiceImpl</span> <span class="keyword">implements</span> <span class="title">IStudentService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> IStudentDao iStudentDao;</span><br><span class="line">    <span class="comment">//配置beans.xml文件实现IStudentDao的setter注入</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIStudentDao</span><span class="params">(IStudentDao iStudentDao)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.iStudentDao = iStudentDao;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(Student student)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        iStudentDao.insert(student);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="创建测试类"><a href="#创建测试类" class="headerlink" title="创建测试类"></a>创建测试类</h2><h3 id="Junit单元测试"><a href="#Junit单元测试" class="headerlink" title="Junit单元测试"></a>Junit单元测试</h3><p>TestService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Student;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.service.impl.StudentServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testRegister</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">        StudentServiceImpl studentServiceImpl = ac.getBean(<span class="string">&quot;studentServiceImpl&quot;</span>, StudentServiceImpl.class);</span><br><span class="line">        Student student = <span class="keyword">new</span> Student();</span><br><span class="line">        student.setId(<span class="number">110</span>);</span><br><span class="line">        student.setUname(<span class="string">&quot;熊大&quot;</span>);</span><br><span class="line">        student.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        studentServiceImpl.insert(student);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h4><h5 id="数据表的初始图"><a href="#数据表的初始图" class="headerlink" title="数据表的初始图"></a>数据表的初始图</h5><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220401024319.png" alt="image-20220401024319232"></p><h5 id="测试成功结果"><a href="#测试成功结果" class="headerlink" title="测试成功结果"></a>测试成功结果</h5><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220401024333.png" alt="image-20220401024333244"></p><h3 id="结合Spring测试框架"><a href="#结合Spring测试框架" class="headerlink" title="结合Spring测试框架"></a>结合Spring测试框架</h3><h4 id="测试结果-1"><a href="#测试结果-1" class="headerlink" title="测试结果"></a>测试结果</h4><p>TestSpring.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.kairong.spring.entity.Student;</span><br><span class="line"><span class="keyword">import</span> cn.kairong.spring.service.impl.StudentServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:beans.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSpring</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    StudentServiceImpl studentServiceImpl;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test2</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        Student student = <span class="keyword">new</span> Student();</span><br><span class="line">        student.setId(<span class="number">111</span>);</span><br><span class="line">        student.setUname(<span class="string">&quot;熊二&quot;</span>);</span><br><span class="line">        student.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        studentServiceImpl.insert(student);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="数据表的初始图-1"><a href="#数据表的初始图-1" class="headerlink" title="数据表的初始图"></a>数据表的初始图</h5><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220401024333.png" alt="image-20220401024333244"></p><h5 id="测试成功结果-1"><a href="#测试成功结果-1" class="headerlink" title="测试成功结果"></a>测试成功结果</h5><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220401024438.png" alt="image-20220401024437964"></p>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springOne </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring-JDBC</title>
      <link href="/blog/2022/04/01/Spring-JDBC/"/>
      <url>/blog/2022/04/01/Spring-JDBC/</url>
      
        <content type="html"><![CDATA[<h1 id="spring的数据库连接"><a href="#spring的数据库连接" class="headerlink" title="spring的数据库连接"></a>spring的数据库连接</h1><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="pom-xml文件"><a href="#pom-xml文件" class="headerlink" title="pom.xml文件"></a>pom.xml文件</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Spring4<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.45<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.24<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="数据库建表"><a href="#数据库建表" class="headerlink" title="数据库建表"></a>数据库建表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>`  (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`) <span class="keyword">USING</span> BTREE</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;ckr&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="创建db-propreties文件"><a href="#创建db-propreties文件" class="headerlink" title="创建db.propreties文件"></a>创建db.propreties文件</h3><p>db.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">jdbc.driverClassName</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/spring?useUnicode=true&amp;characterEncoding=utf-8</span></span><br><span class="line"><span class="meta">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">jdbc.password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure><h2 id="传统方式"><a href="#传统方式" class="headerlink" title="传统方式"></a>传统方式</h2><h3 id="创建一个测试类"><a href="#创建一个测试类" class="headerlink" title="创建一个测试类"></a>创建一个测试类</h3><p>DateSourceTest.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.transform.Result;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateSourceTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OneTest</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//加载驱动</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="comment">//获取连接</span></span><br><span class="line">        Connection connection = DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/spring?useUnicode=true&amp;characterEncoding=utf-8&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        System.out.println(connection);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//基于连接进行数据库操作</span></span><br><span class="line">        PreparedStatement pst = connection.prepareStatement(<span class="string">&quot;select * from user&quot;</span>);</span><br><span class="line">        ResultSet resultSet = pst.executeQuery();</span><br><span class="line">        <span class="keyword">while</span> (resultSet.next())&#123;</span><br><span class="line">            Integer id = resultSet.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">            String name = resultSet.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">            String password = resultSet.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">            System.out.println(id+<span class="string">&quot;--&quot;</span>+name+<span class="string">&quot;--&quot;</span>+password);</span><br><span class="line">        &#125;</span><br><span class="line">        resultSet.close();</span><br><span class="line">        pst.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="控制台结果"><a href="#控制台结果" class="headerlink" title="控制台结果"></a>控制台结果</h3><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220331001802.png" alt="image-20220331001801703"></p><h2 id="工具类方式"><a href="#工具类方式" class="headerlink" title="工具类方式"></a>工具类方式</h2><h3 id="创建工具类"><a href="#创建工具类" class="headerlink" title="创建工具类"></a>创建工具类</h3><p>JDBCUtil.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.kairong.spring.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String driverClassName;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String url;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String username;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String password;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">    ResourceBundle bundle = ResourceBundle.getBundle(<span class="string">&quot;db&quot;</span>);</span><br><span class="line">    driverClassName = bundle.getString(<span class="string">&quot;jdbc.driverClassName&quot;</span>);</span><br><span class="line">    url = bundle.getString(<span class="string">&quot;jdbc.url&quot;</span>);</span><br><span class="line">    username = bundle.getString(<span class="string">&quot;jdbc.username&quot;</span>);</span><br><span class="line">    password = bundle.getString(<span class="string">&quot;jdbc.password&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取连接</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException </span>&#123;</span><br><span class="line">        Class.forName(driverClassName);</span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(url,username,password);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 关闭连接</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet rs, Statement st,Connection conn)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (rs != <span class="keyword">null</span>)&#123;</span><br><span class="line">            rs.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (st != <span class="keyword">null</span>) &#123;</span><br><span class="line">            st.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (conn != <span class="keyword">null</span>)&#123;</span><br><span class="line">            conn.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="相关测试类"><a href="#相关测试类" class="headerlink" title="相关测试类"></a>相关测试类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TwoTest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line">    ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        conn = JDBCUtil.getConnection();</span><br><span class="line">        ps = conn.prepareStatement(<span class="string">&quot;select * from user&quot;</span>);</span><br><span class="line">        rs = ps.executeQuery();</span><br><span class="line">        <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">            System.out.println(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCUtil.close(rs,ps,conn);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="控制台结果-1"><a href="#控制台结果-1" class="headerlink" title="控制台结果"></a>控制台结果</h3><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220331010301.png" alt="image-20220331010301828"></p><h2 id="结合Spring1-0方式"><a href="#结合Spring1-0方式" class="headerlink" title="结合Spring1.0方式"></a>结合Spring1.0方式</h2><h3 id="创建beans-xml文件"><a href="#创建beans-xml文件" class="headerlink" title="创建beans.xml文件"></a>创建beans.xml文件</h3><p>beans.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--先加载到db.properties配置文件中--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;db.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:property-placeholder</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--spring框架集成jdbc--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driverClassName&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="相关测试类-1"><a href="#相关测试类-1" class="headerlink" title="相关测试类"></a>相关测试类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ThreeTest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">        DriverManagerDataSource dataSource = ac.getBean(<span class="string">&quot;dataSource&quot;</span>,DriverManagerDataSource.class);</span><br><span class="line">        Connection connection = dataSource.getConnection();</span><br><span class="line">        System.out.println(connection);</span><br><span class="line">        PreparedStatement ps = connection.prepareStatement(<span class="string">&quot;select * from user&quot;</span>);</span><br><span class="line">        ResultSet rs = ps.executeQuery();</span><br><span class="line">        <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">            Integer id = rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">            String name = rs.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">            String password = rs.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">            System.out.println(id+<span class="string">&quot;--&quot;</span>+name+<span class="string">&quot;--&quot;</span>+password);</span><br><span class="line">        &#125;</span><br><span class="line">        rs.close();</span><br><span class="line">        ps.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="控制台结果-2"><a href="#控制台结果-2" class="headerlink" title="控制台结果"></a>控制台结果</h3><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220331012049.png" alt="image-20220331012049606"></p><h2 id="Spring进阶版-JDBCTemplate"><a href="#Spring进阶版-JDBCTemplate" class="headerlink" title="Spring进阶版(JDBCTemplate)"></a>Spring进阶版(JDBCTemplate)</h2><h3 id="在beans-xml添加配置"><a href="#在beans-xml添加配置" class="headerlink" title="在beans.xml添加配置"></a>在beans.xml添加配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--spring基于DriverManagerDataSource--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="相关测试类-2"><a href="#相关测试类-2" class="headerlink" title="相关测试类"></a>相关测试类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fourTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">    JdbcTemplate jdbcTemplate = ac.getBean(<span class="string">&quot;jdbcTemplate&quot;</span>, JdbcTemplate.class);</span><br><span class="line">    String sql =<span class="string">&quot;select * from user&quot;</span>;</span><br><span class="line">    Map&lt;String, Object&gt; stringObjectMap = jdbcTemplate.queryForMap(sql);</span><br><span class="line">    System.out.println(stringObjectMap);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="控制台结果-3"><a href="#控制台结果-3" class="headerlink" title="控制台结果"></a>控制台结果</h3><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220331012811.png" alt="image-20220331012811184"></p><h2 id="Druid（连接池）集成jdbc"><a href="#Druid（连接池）集成jdbc" class="headerlink" title="Druid（连接池）集成jdbc"></a>Druid（连接池）集成jdbc</h2><h3 id="在beans-xml添加配置-1"><a href="#在beans-xml添加配置-1" class="headerlink" title="在beans.xml添加配置"></a>在beans.xml添加配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--使用Druid连接池--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;druidDataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driverClassName&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="相关测试类-3"><a href="#相关测试类-3" class="headerlink" title="相关测试类"></a>相关测试类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fiveTest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">    DruidDataSource druidDataSource = ac.getBean(<span class="string">&quot;druidDataSource&quot;</span>, DruidDataSource.class);</span><br><span class="line">    DruidPooledConnection connection = druidDataSource.getConnection();</span><br><span class="line">    System.out.println(connection);</span><br><span class="line">    <span class="comment">//操作数据库</span></span><br><span class="line">    PreparedStatement ps = connection.prepareStatement(<span class="string">&quot;select * from user&quot;</span>);</span><br><span class="line">    ResultSet rs = ps.executeQuery();</span><br><span class="line">    <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">        Integer id = rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        String name = rs.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        String password = rs.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        System.out.println(id+<span class="string">&quot;--&quot;</span>+name+<span class="string">&quot;--&quot;</span>+password);</span><br><span class="line">    &#125;</span><br><span class="line">    rs.close();</span><br><span class="line">    ps.close();</span><br><span class="line">    connection.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="控制台结果-4"><a href="#控制台结果-4" class="headerlink" title="控制台结果"></a>控制台结果</h3><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220331013421.png" alt="image-20220331013421093"></p>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>依赖注入</title>
      <link href="/blog/2022/03/25/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/"/>
      <url>/blog/2022/03/25/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<h1 id="依赖注入（DI）"><a href="#依赖注入（DI）" class="headerlink" title="依赖注入（DI）"></a>依赖注入（DI）</h1><h2 id="setter方式"><a href="#setter方式" class="headerlink" title="setter方式"></a>setter方式</h2><h3 id="实体类要求："><a href="#实体类要求：" class="headerlink" title="实体类要求："></a>实体类要求：</h3><h4 id="Student1-class"><a href="#Student1-class" class="headerlink" title="Student1.class"></a>Student1.class</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student1</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> Hobby1 hobby1;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHobby</span><span class="params">(Hobby1 hobby1)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.hobby1 = hobby1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, hobby=&quot;</span> + hobby1 +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Hobby1-class"><a href="#Hobby1-class" class="headerlink" title="Hobby1.class"></a>Hobby1.class</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hobby1</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String sports;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSports</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sports;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSports</span><span class="params">(String sports)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sports = sports;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hobby&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, sports=&#x27;&quot;</span> + sports + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="xml文件要求："><a href="#xml文件要求：" class="headerlink" title="xml文件要求："></a>xml文件要求：</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;cn.kairong.spring.domain.test1.Student1&quot;</span> <span class="attr">id</span>=<span class="string">&quot;student1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;dzx&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;20&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;Hobby&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;h1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;cn.kairong.spring.domain.test1.Hobby1&quot;</span> <span class="attr">id</span>=<span class="string">&quot;h1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sports&quot;</span> <span class="attr">value</span>=<span class="string">&quot;yundong&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>如果是基本类型/String使用Value赋值</li><li>如果是自定义的引用类型/第三方的应用类型，需要注入对象，使用ref注入</li></ul><h3 id="测试类示例；"><a href="#测试类示例；" class="headerlink" title="测试类示例；"></a>测试类示例；</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">AbstractApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;test1.xml&quot;</span>);</span><br><span class="line">    Student1 stu1 = applicationContext.getBean(<span class="string">&quot;student1&quot;</span>, Student1.class);</span><br><span class="line">    System.out.println(stu1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="控制台输出："><a href="#控制台输出：" class="headerlink" title="控制台输出："></a>控制台输出：</h3><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220325001254.png" alt="image-20220325001253902"></p><h2 id="构造器方式"><a href="#构造器方式" class="headerlink" title="构造器方式"></a>构造器方式</h2><h3 id="实体类要求：-1"><a href="#实体类要求：-1" class="headerlink" title="实体类要求："></a>实体类要求：</h3><h4 id="Student2-class"><a href="#Student2-class" class="headerlink" title="Student2.class"></a>Student2.class</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> Hobby2 hobby2;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student2</span><span class="params">(<span class="keyword">int</span> id, String name, <span class="keyword">int</span> age, Hobby2 hobby2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.hobby2 = hobby2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, hobby=&quot;</span> + hobby2 +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Hobby2-class"><a href="#Hobby2-class" class="headerlink" title="Hobby2.class"></a>Hobby2.class</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hobby2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String sports;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Hobby2</span><span class="params">(<span class="keyword">int</span> id, String sports)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.sports = sports;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hobby&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, sports=&#x27;&quot;</span> + sports + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="xml文件要求：-1"><a href="#xml文件要求：-1" class="headerlink" title="xml文件要求："></a>xml文件要求：</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;cn.kairong.spring.domain.test2.Student2&quot;</span> <span class="attr">id</span>=<span class="string">&quot;student2&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;201&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;201&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;201&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;hobby2&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;h2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;cn.kairong.spring.domain.test2.Hobby2&quot;</span> <span class="attr">id</span>=<span class="string">&quot;h2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;201&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;sports&quot;</span> <span class="attr">value</span>=<span class="string">&quot;test2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在bean中配置了多少个参数，那么必须要求当前类型中有对应数量参数的构造器</li><li>bean中参数类型应当与当前类型中的构造器的参数匹配.</li><li>构造器中的给基本类型/String 类型赋值依然使用的是Value,给自定义的应用类型添加依赖使用ref.</li><li>在xml文件中添加依赖关系时,和beans配置的先后顺序没有关系.</li><li>通过构造器的方式依赖注入,那么先实例化需要注入的Bean,然后再实例化依赖Bean的对象</li></ul><h3 id="测试类示例；-1"><a href="#测试类示例；-1" class="headerlink" title="测试类示例；"></a>测试类示例；</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">AbstractApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;test2.xml&quot;</span>);</span><br><span class="line">Student2 stu2 = applicationContext.getBean(<span class="string">&quot;student2&quot;</span>, Student2.class);</span><br><span class="line">System.out.println(stu2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="控制台输出：-1"><a href="#控制台输出：-1" class="headerlink" title="控制台输出："></a>控制台输出：</h3><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220325002839.png" alt="image-20220325002839710"></p><h2 id="循环依赖"><a href="#循环依赖" class="headerlink" title="循环依赖"></a>循环依赖</h2><p>类关系A-B-C-A</p><p>分别使用两种依赖注入</p><p>就结果而言</p><ul><li><strong>spring支持setter方式的循环依赖，不支持构造器方式的循环依赖.</strong></li></ul>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysql</title>
      <link href="/blog/2022/03/12/mysql/"/>
      <url>/blog/2022/03/12/mysql/</url>
      
        <content type="html"><![CDATA[<h2 id="sql重点语法"><a href="#sql重点语法" class="headerlink" title="sql重点语法"></a>sql重点语法</h2><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220312144408.png" alt="image-20220312144408615"></p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220312144439.png" alt="image-20220312144439088"></p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220312144458.png" alt="image-20220312144458541"></p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220312193934.png" alt="image-20220312193934858"></p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220312193956.png" alt="image-20220312193956122"></p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220312194013.png" alt="image-20220312194013669"></p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220312194030.png" alt="image-20220312194030874"></p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220312194102.png" alt="image-20220312194102632"></p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220312194150.png" alt="image-20220312194150450"></p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220312194211.png" alt="image-20220312194211843"></p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220312194234.png" alt="image-20220312194234274"></p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220312194253.png" alt="image-20220312194253202"></p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220312194322.png" alt="image-20220312194322319"></p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220312194336.png" alt="image-20220312194336819"></p><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220312194351.png" alt="image-20220312194351814"></p><h2 id="sql练习（表见附件）"><a href="#sql练习（表见附件）" class="headerlink" title="sql练习（表见附件）"></a>sql练习（表见附件）</h2><h3 id="第一阶段"><a href="#第一阶段" class="headerlink" title="第一阶段"></a>第一阶段</h3><p>查询所有员工的年薪((月薪 + 奖金) * 12)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ENAME,(ifnull(comm,<span class="number">0</span>)<span class="operator">+</span>sal)<span class="operator">*</span><span class="number">12</span> <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure><p>查询有奖金的员工信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ISNULL(COMM),ENAME <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure><p>查询公司的老板</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DEPTNO,MGR <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure><p>查询出基本工资高于 1500 的所有员工信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ENAME,sal <span class="keyword">from</span> emp <span class="keyword">WHERE</span> sal<span class="operator">&gt;=</span><span class="number">1500</span>;</span><br></pre></td></tr></table></figure><p>查询名字叫 SCOTT 的员工所从事的工作</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ENAME,JOB <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ENAME<span class="operator">=</span> &quot;SCOTT&quot;;</span><br></pre></td></tr></table></figure><p>查询 1981 年入职的员工信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> HIREDATE <span class="keyword">like</span> <span class="string">&#x27;1981-__-__&#x27;</span>;</span><br></pre></td></tr></table></figure><p>查询年薪小于 3W 的员工</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ENAME,(ifnull(comm,<span class="number">0</span>)<span class="operator">+</span>sal)<span class="operator">*</span><span class="number">12</span> <span class="keyword">from</span> emp <span class="keyword">WHERE</span> (ifnull(comm,<span class="number">0</span>)<span class="operator">+</span>sal)<span class="operator">*</span><span class="number">12</span><span class="operator">&lt;=</span><span class="number">30000</span>;</span><br></pre></td></tr></table></figure><p>查询所有不是销售人员的员工信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ENAME,JOB <span class="keyword">from</span> emp <span class="keyword">WHERE</span> job <span class="operator">!=</span> &quot;CLERK&quot;;</span><br></pre></td></tr></table></figure><p>查询工资在 2000-3000 之间的员工信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ENAME,sal <span class="keyword">from</span> emp <span class="keyword">WHERE</span> sal <span class="keyword">BETWEEN</span> <span class="number">2000</span> <span class="keyword">and</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure><p>查询 1981 年入职的员工</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ENAME,HIREDATE <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> HIREDATE <span class="keyword">like</span> &quot;1981-__-__&quot;;</span><br></pre></td></tr></table></figure><p>查询工资为 800 或 1600 或 3000 的员工</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ENAME,sal <span class="keyword">from</span> emp <span class="keyword">WHERE</span> sal <span class="operator">=</span><span class="number">800</span> <span class="keyword">OR</span> sal<span class="operator">=</span> <span class="number">1600</span> <span class="keyword">or</span> sal<span class="operator">=</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure><p>查询出所有雇员姓名是以 A 开头的全部雇员信息。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">WHERE</span> ENAME <span class="keyword">like</span> &quot;A%&quot;; </span><br></pre></td></tr></table></figure><p>查询出雇员姓名第二个字母是 M 的全部雇员信息。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">WHERE</span> ENAME <span class="keyword">like</span> &quot;_M%&quot;;</span><br></pre></td></tr></table></figure><p>查询出雇员姓名任意位置上包含字母 A 的全部雇员信息。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">WHERE</span> ENAME <span class="keyword">like</span> &quot;%A%&quot;;</span><br></pre></td></tr></table></figure><p>查询姓名中有 e 或者 a 的员工姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">WHERE</span> ENAME <span class="keyword">like</span>&quot;%e%&quot; <span class="keyword">or</span> ENAME <span class="keyword">like</span> <span class="string">&#x27;%a%&#x27;</span>; </span><br></pre></td></tr></table></figure><p>查询工资在 1500~3000 之间的全部员工信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sal <span class="keyword">BETWEEN</span> <span class="number">1500</span> <span class="keyword">and</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure><p>查询工资不在 2000-3000 之间的员工信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sal <span class="operator">&lt;</span><span class="number">2000</span> <span class="keyword">or</span> sal <span class="operator">&gt;</span><span class="number">3000</span>;</span><br></pre></td></tr></table></figure><p>查询工资不为 800 或 1600 或 3000 的员工</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sal <span class="operator">!=</span><span class="number">800</span> <span class="keyword">or</span> sal <span class="operator">!=</span><span class="number">1600</span> <span class="keyword">or</span> sal <span class="operator">!=</span><span class="number">3000</span>;</span><br></pre></td></tr></table></figure><p>查询出职位是办事员 (CLERK) 或者是销售人员 (SALESMAN) 的全部信息，且工资在 1000 以上</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> SAL<span class="operator">&gt;</span><span class="number">1000</span> <span class="keyword">and</span> job <span class="operator">=</span> <span class="string">&#x27;CLERK&#x27;</span> <span class="keyword">OR</span> JOB <span class="operator">=</span> <span class="string">&#x27;SALESMAN&#x27;</span> <span class="keyword">AND</span> SAL<span class="operator">&gt;</span><span class="number">1000</span>;</span><br></pre></td></tr></table></figure><h3 id="第二阶段"><a href="#第二阶段" class="headerlink" title="第二阶段"></a>第二阶段</h3><p>查询员工编号，员工名称，员工所属部门的编号和名称<br>#隐式内连接</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e.empno , e.ename, d.deptno,d.dname <span class="keyword">from</span> emp <span class="keyword">as</span> e, dept <span class="keyword">as</span> d <span class="keyword">where</span> e.deptno <span class="operator">=</span> d.deptno</span><br></pre></td></tr></table></figure><p>#显式内连接</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e.empno,e.ename,d.deptno,d.dname <span class="keyword">from</span> emp <span class="keyword">as</span> e <span class="keyword">inner</span> <span class="keyword">join</span> dept <span class="keyword">as</span> d <span class="keyword">on</span> e.deptno <span class="operator">=</span> d.deptno</span><br></pre></td></tr></table></figure><p>查询员工的姓名，工资，所在部门的名称，以及工资的等级<br>#隐式内连接</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e.ename,e.sal,d.dname,s.grade <span class="keyword">from</span> emp <span class="keyword">as</span> e,dept <span class="keyword">as</span> d,salgrade <span class="keyword">as</span> s <span class="keyword">where</span> e.deptno<span class="operator">=</span>d.deptno <span class="keyword">and</span> e.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal</span><br></pre></td></tr></table></figure><p>#显式内连接</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e.ename,e.sal,d.dname,s.grade <span class="keyword">from</span> emp <span class="keyword">as</span> e <span class="keyword">inner</span> <span class="keyword">join</span> dept <span class="keyword">as</span> d <span class="keyword">on</span> e.deptno<span class="operator">=</span>d.deptno <span class="keyword">inner</span> <span class="keyword">join</span> salgrade <span class="keyword">as</span> s <span class="keyword">on</span> e.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal </span><br></pre></td></tr></table></figure><p>#左外连接</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> emp.EMPNO, emp.ENAME, emp.SAL, dept.DNAME <span class="keyword">FROM</span> emp <span class="keyword">left</span> <span class="keyword">JOIN</span> dept <span class="keyword">ON</span> emp.DEPTNO <span class="operator">=</span> dept.DEPTNO</span><br></pre></td></tr></table></figure><p>#右外连接</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> emp.EMPNO, emp.ENAME, emp.SAL, dept.DNAME <span class="keyword">FROM</span> emp <span class="keyword">right</span> <span class="keyword">JOIN</span> dept <span class="keyword">ON</span> emp.DEPTNO <span class="operator">=</span> dept.DEPTNO</span><br></pre></td></tr></table></figure><p>查询所有员工每个月的平均工资及总工资</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">as</span> avgSal,<span class="built_in">sum</span>(sal) <span class="keyword">as</span> sumSal <span class="keyword">from</span> emp</span><br></pre></td></tr></table></figure><p>查询月薪在 2000 以上的员工总人数</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> emp <span class="keyword">where</span> sal<span class="operator">&gt;</span><span class="number">2000</span></span><br></pre></td></tr></table></figure><p>查询员工最高工资和最低工资差距</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(sal)<span class="operator">-</span><span class="built_in">min</span>(sal) <span class="keyword">from</span> emp</span><br></pre></td></tr></table></figure><p>按照职位分组，求出每个职位的最高和最低工资</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(sal),<span class="built_in">min</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> job</span><br></pre></td></tr></table></figure><p>查询出每一个部门员工的平均工资</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno</span><br></pre></td></tr></table></figure><p>查询各个部门和岗位的平均工资</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(sal),deptno,job <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno,job</span><br></pre></td></tr></table></figure><p>查询部门平均工资高于 2000 的部门及其平均工资</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> <span class="built_in">avg</span>(sal)<span class="operator">&gt;</span><span class="number">2000</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">as</span> avgSal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> avgSal<span class="operator">&gt;</span><span class="number">2000</span></span><br></pre></td></tr></table></figure><p>查询在 80, 81, 82 年各进公司多少人</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">year</span>(hiredate) <span class="keyword">as</span> y, <span class="built_in">count</span>(empno) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> y <span class="keyword">having</span> y <span class="keyword">between</span> <span class="string">&#x27;1980&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;1982&#x27;</span></span><br></pre></td></tr></table></figure><p>查询各个管理人员下员工的平均工资，其中最低工资不能低于 1300</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> mgr, <span class="built_in">avg</span>(sal),<span class="built_in">min</span>(sal) <span class="keyword">as</span> minSal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> mgr <span class="keyword">having</span> minsal<span class="operator">&gt;</span><span class="number">1300</span></span><br></pre></td></tr></table></figure><p>查询大于平均工资的员工</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal<span class="operator">&gt;</span>(<span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp)</span><br></pre></td></tr></table></figure><p>查询出工资比 MARTIN 还要高的全部雇员信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sal <span class="keyword">from</span> emp <span class="keyword">where</span> ename<span class="operator">=</span><span class="string">&#x27;martin&#x27;</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal<span class="operator">&gt;</span>(<span class="keyword">select</span> sal <span class="keyword">from</span> emp <span class="keyword">where</span> ename<span class="operator">=</span><span class="string">&#x27;martin&#x27;</span>)</span><br></pre></td></tr></table></figure><p>查询平均工资高于公司平均工资的部门信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">as</span> avgSal,d.deptno,d.dname <span class="keyword">from</span> emp <span class="keyword">as</span> e <span class="keyword">inner</span> <span class="keyword">join</span> dept <span class="keyword">as</span> d <span class="keyword">on</span> e.deptno<span class="operator">=</span>d.deptno  <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> avgSal<span class="operator">&gt;</span>(<span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp)</span><br></pre></td></tr></table></figure><p>查询工资等于部门经理（职位是 MANAGER）的员工信息。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sal <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span><span class="string">&#x27;MA</span></span><br></pre></td></tr></table></figure><h2 id="附件"><a href="#附件" class="headerlink" title="附件"></a>附件</h2><p><a href="https://gitee.com/kairong6/blog/blob/master/02_MySQL.pdf">sql语法文件</a></p><p><a href="https://gitee.com/kairong6/blog/blob/master/mysqlplus.sql">sql建表文件</a></p>]]></content>
      
      
      <categories>
          
          <category> mysql基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java03</title>
      <link href="/blog/2022/01/22/java03/"/>
      <url>/blog/2022/01/22/java03/</url>
      
        <content type="html"><![CDATA[<h2 id="Scanner接受键盘数据"><a href="#Scanner接受键盘数据" class="headerlink" title="Scanner接受键盘数据"></a>Scanner接受键盘数据</h2><h3 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ckr.base.com.ckr.base;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">demo4</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//创建一个扫描器对象，接受键盘数据</span></span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;使用next方式接受：&quot;</span>);</span><br><span class="line">        <span class="comment">//判断用户有没有输入字符串</span></span><br><span class="line">        <span class="keyword">if</span> (scanner.hasNext())&#123;</span><br><span class="line">            <span class="comment">//使用next方式接受</span></span><br><span class="line">            String str = scanner.next();</span><br><span class="line">            System.out.println(<span class="string">&quot;输出内容为：&quot;</span>+str);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//凡是属于IO流用完即关</span></span><br><span class="line">        scanner.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ckr.base.com.ckr.base;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">demo5</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> m = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (scanner.hasNextDouble()) &#123;</span><br><span class="line">            <span class="keyword">double</span> x = scanner.nextDouble();</span><br><span class="line">            m = m + <span class="number">1</span>; <span class="comment">//m++</span></span><br><span class="line">            sum = sum + x;</span><br><span class="line">            System.out.println(<span class="string">&quot;你输入了第&quot;</span> + m + <span class="string">&quot;个数据，然后当前结果sum:&quot;</span> + sum);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(m + <span class="string">&quot;个数的和为&quot;</span> + sum);</span><br><span class="line">        System.out.println(m + <span class="string">&quot;个数的平均值为&quot;</span> + (sum / m));</span><br><span class="line">        scanner.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java02</title>
      <link href="/blog/2022/01/16/java02/"/>
      <url>/blog/2022/01/16/java02/</url>
      
        <content type="html"><![CDATA[<h2 id="强转换和自转换"><a href="#强转换和自转换" class="headerlink" title="强转换和自转换"></a>强转换和自转换</h2><h3 id="类型等级"><a href="#类型等级" class="headerlink" title="类型等级"></a>类型等级</h3><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220116200414.png" alt="image-20220116200413981"></p><h3 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">demo2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">128</span>;</span><br><span class="line">        <span class="keyword">byte</span> b = (<span class="keyword">byte</span>)i;<span class="comment">//内存溢出     高--低    强制转换</span></span><br><span class="line">        <span class="keyword">double</span> d = i;   <span class="comment">//低--高  自动转换</span></span><br><span class="line">        System.out.println(i);</span><br><span class="line">        System.out.println(b);</span><br><span class="line">        System.out.println(d);</span><br><span class="line">        <span class="comment">//转换需要注意精度问题</span></span><br><span class="line">        System.out.println(<span class="string">&quot;=========================&quot;</span>);</span><br><span class="line">        System.out.println((<span class="keyword">int</span>)<span class="number">27.23</span>);</span><br><span class="line">        System.out.println((<span class="keyword">int</span>)-<span class="number">78.23F</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;=========================&quot;</span>);</span><br><span class="line">        <span class="keyword">char</span> c = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">        <span class="keyword">int</span> q = c+<span class="number">1</span>;</span><br><span class="line">        System.out.println(q);</span><br><span class="line">        System.out.println((<span class="keyword">char</span>)q);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="数据计算转换问题"><a href="#数据计算转换问题" class="headerlink" title="数据计算转换问题"></a>数据计算转换问题</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">demo3</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//处理数据时，若数据源较大时</span></span><br><span class="line">        <span class="keyword">int</span> mony = <span class="number">10_0000_0000</span>;<span class="comment">//jdk7的特色</span></span><br><span class="line">        <span class="keyword">int</span> year = <span class="number">20</span>;</span><br><span class="line">        <span class="keyword">int</span> total2 = mony*year;</span><br><span class="line">        <span class="keyword">long</span> total = mony*year;</span><br><span class="line">        <span class="keyword">long</span> total1 = mony*(<span class="keyword">long</span>)year;</span><br><span class="line">        System.out.println(total);</span><br><span class="line">        System.out.println(total1);</span><br><span class="line">        System.out.println(total2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="变量命名"><a href="#变量命名" class="headerlink" title="变量命名"></a>变量命名</h2><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220116200619.png" alt="image-20220116200619509"></p><h2 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h2><p><img src="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220116200655.png" alt="image-20220116200655899"></p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>快递清单</title>
      <link href="/blog/2022/01/07/%E5%BF%AB%E9%80%92%E6%B8%85%E5%8D%95/"/>
      <url>/blog/2022/01/07/%E5%BF%AB%E9%80%92%E6%B8%85%E5%8D%95/</url>
      
        <content type="html"><![CDATA[<h2 id="顺丰速运"><a href="#顺丰速运" class="headerlink" title="顺丰速运"></a>顺丰速运</h2><ul><li><h3 id="砂糖橘（无取件码）"><a href="#砂糖橘（无取件码）" class="headerlink" title="砂糖橘（无取件码）"></a>砂糖橘（<a href="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220107173837.png">无取件码</a>）</h3><p>（程开荣：18791603671）</p></li></ul><h2 id="韵达快递"><a href="#韵达快递" class="headerlink" title="韵达快递"></a>韵达快递</h2><ul><li><h3 id="南瓜子（06043）"><a href="#南瓜子（06043）" class="headerlink" title="南瓜子（06043）"></a>南瓜子（<a href="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220107171802.jpg">06043</a>）</h3></li></ul><ul><li><h3 id="西瓜子（06043）"><a href="#西瓜子（06043）" class="headerlink" title="西瓜子（06043）"></a>西瓜子（<a href="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220107173645.png">06043</a>）</h3></li><li><h3 id="下饭拌酱（04019）"><a href="#下饭拌酱（04019）" class="headerlink" title="下饭拌酱（04019）"></a>下饭拌酱（<a href="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220107174120.png">04019</a>）</h3></li><li><h3 id="砍刀（05068）"><a href="#砍刀（05068）" class="headerlink" title="砍刀（05068）"></a>砍刀（<a href="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220107174254.png">05068</a>）</h3></li><li><h3 id="文财苹果（06024）"><a href="#文财苹果（06024）" class="headerlink" title="文财苹果（06024）"></a>文财苹果（<a href="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220107175129.png">06024</a>）</h3><p>（程文财：13892690577）</p></li></ul><h2 id="申通快递"><a href="#申通快递" class="headerlink" title="申通快递"></a>申通快递</h2><ul><li><h3 id="抄勺（1-03-23）"><a href="#抄勺（1-03-23）" class="headerlink" title="抄勺（1-03-23）"></a>抄勺（<a href="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220107174437.png">1-03-23</a>）</h3></li><li><h3 id="小荣苹果（1-06-35）"><a href="#小荣苹果（1-06-35）" class="headerlink" title="小荣苹果（1-06-35）"></a>小荣苹果（<a href="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220107174652.png">1-06-35</a>）</h3></li><li><h3 id="开心果（还没到）"><a href="#开心果（还没到）" class="headerlink" title="开心果（还没到）"></a><del>开心果（<a href="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220107175715.png">还没到</a>）</del></h3></li></ul><h2 id="圆通速递"><a href="#圆通速递" class="headerlink" title="圆通速递"></a>圆通速递</h2><ul><li><h3 id="生瓜子和熟瓜子（还没到）"><a href="#生瓜子和熟瓜子（还没到）" class="headerlink" title="生瓜子和熟瓜子（还没到）"></a><del>生瓜子和熟瓜子（<a href="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220107180131.png">还没到</a>）</del></h3></li><li><h3 id="大蒜头（还没到）"><a href="#大蒜头（还没到）" class="headerlink" title="大蒜头（还没到）"></a><del>大蒜头（<a href="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220107180839.png">还没到</a>）</del></h3></li></ul><h2 id="中通快递"><a href="#中通快递" class="headerlink" title="中通快递"></a>中通快递</h2><ul><li><h3 id="砂糖橘（还没到）"><a href="#砂糖橘（还没到）" class="headerlink" title="砂糖橘（还没到）"></a><del>砂糖橘（<a href="https://ckr666.oss-cn-chengdu.aliyuncs.com/img/20220107180702.png">还没到</a>）</del></h3></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 年货快递 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>day01</title>
      <link href="/blog/2022/01/03/day01-1/"/>
      <url>/blog/2022/01/03/day01-1/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="52773cf4412a8737308123663e1482f38e6d715cf59259abf56d7faf8b86aa4b">4630436162ade97ba2718b7d0c4b3b63cb3a3f659c5ca08b4bca0f5845928186a48cd6044e5141339982baf7d30b0c0363b7babfe2544be1fca415ff51438edc77396df567d37771ce741e4cf5fa87ab3d89ddffe7ccf0cb0be79d089df6ede0b671321ba862c09092e737cc625e5bf3e4ea02f94aac5b812d73d97a2b1551f87b688af098454114f586343262a35a08b3b58b7ce374aa7a72035e68dabe3525cf905421ef3a9ec93333ef68c820fbc5766d3ec8f5b01b71623cf28fdd5e2974ec9e1d323a359c65d6f480c2bbf590e17c7aa6a2235cd13f9ea9d5a1c81e49961b569e2e80ddf6d33e3655c8ca243cc018dd94d4249304842deb411c1728502b7df7c6ae186fb51fa9bf9dd4dda943b2a10d0529da053c39c65b83809f3396cf7bcc682306377633bddf30c617760eca5e5034f73836b92ed5621cb24679f90bc76ee0b782848fc140ade4203303f55c757b573e520de13f036150e90a16bcaaa8fbb26a584b1fabe74d0e71d2087a70bbbe059021e07f95accc031d97932b6a0d2376f0f84fc6d9db27ab91628ba7ab96f94c5058181751312243c1456199604cb8eeeb968f5ec70b89bf92c34f48f9cbbc054e1f02e78467ccd3050a6338592b14ab4098daf026ce4c9099e2b38edae9f257a51e06d3dd53557127b488dd6cd0a40585bd2a80697b8422a4cf126e092f8ac5948d78950fd500e4d30788634005d14226799f5221ef593a05d80cea64131ad2b55d75e7df46973a70da280782d560797f38ff63f8444539786214638d94af957a3ef3fe5fe11e75a9c25ad4a25d3419a8116739d5316bd350ced28a7d479e5d4c1e5d0befb50592700477498438b1b312164cc9b8d9d293f425821af7a0fd1ebdfb39205a90020c79620338996e76ba278d7d95136d6d49dea31ca47a4759e02b9943fbe41c0d35189aa1894c7a73fedf3ea4d316856b10d9b9fc72732764d5539f6c4a0f3b6bfde7ba4f2deeb835c6dff92b8a32c99615eb38f573658b2cec45c43a4be0c008520227a021b1300d781357356a07533a0a6aa4680a309e838790a245678c771b7db069a9d1e100b91abff97c5a4bedf5471712c5cd24018e49d30c1b29ad8b912d8619accb5967fe0441eee22665826339b819eea61948c25d5e94abb6d9f95dbe4b7f2b22115991c4efb5043f9dc5b7abb5fbca565b61ff36a8aae0f3461dcabbd37da089b2c9ffc8ce27af133cb6ff0fe2de16c8a8739af1ea9dd1eea9a51a4ad51729514092f158d074780c6a44c9d95d66de65e72d98d18dd7fe017ef6d6eba84409260787d61fdfee9e5b74cbd185a6065bf04049f16d62b1d98d3d475378125a725eb0aab6b0e378d3db8e8a0ade2a45cbff28a3f406b04b7fb924701d540e2cc8e2f3a0fde1bd43c7ca2f5eaafdb0d75d52551bcfcb9076211148652ad2dacd778154aa4f08587d9708a9fa8706cdcf2a9284b36fbf51b5956a64bb3ddf1933af911d30ffc5fb8b8cc1f724d8e51f796dfe6a76c0eba3492dfb45f4fb5f2fb5f86dd04043373d2ed689b8536d88a49119f4019b4064c57f5846c7b4f85de2b106528ad2595301f5cc2e99693d6fe82cf374ce1090e0717fdb1b192af554025a6cb9081228447fa935e5ac9d5212962a5ff98e338ce7b6cd82aa935fd2b4c401ad66acd88775a33998083d369966bc492db36fc36f6fd432a5d1784b4e6192fe22e77087a0b4019d38514280e4f8db705a8ff0b8e6690616b0705a52dff994751789e7f1f8942eef77818b532f77862928005eb79d4c586b741b8e8b389037a933173f270b96079d5c93a41cc34ecb00003e63581279c4485fe3f89df3ffd6f37c845bb60862d1e8b71a1d9bc752bf13c967bc86ba26fd7dca659350ec6f6c18d4234d0384370ab5b012f59e7d0dd7f9913ae2a7918e13fdf128062c9222f23596da5099faca3afb0ed2f9f1b3d94bff0337301ad28fc8fa4af4544e5d23bb99cb5dda604def18c0acd9db45ed2b6458780afed1272e5b1a790c12e4363834da15071abc5694f8a434488b4525df77c788ae9ae0b01f4ed2507dc31d4e734b5cb3842dc0e7fe511c8cbd44b1ed0458638147adc1ee9226b8fcd317557f89639d51d1a9fb9d1270ddc8879922e5e248db3f39f1ff3f7156017edadc8e6bbd3481b7a627d640b93c8583f94f5c867cbcecf018d6ab4a2ac6008442cf718d2574a1dab012d144af87b27821d7611f846c563929948b04f47126e31a726d7ac2b7db085a5e9000289ea156bacc8b2d90d58f7d9b44b11a069287eaca86a8df88aa59b5196e9724a0dfba2641fe4f42b7dd739caf4d0eb2ab2bfe871cd271025e28899da4442d7ad772c7284f85110580909e56a5876b16c4fe140a943f27cb8292e4749e0dea495060a2599a12ca0df6d42b1fba226b57fa07934021b5bb70f6ff9dc178ee555b52f6da3553225047ccaa6d2a827a45a1a6e8aec0589159af523dd206379d25d7e44188a15e54bc0823e61ab8fafd901ef23c75c098926c57a10a35ce3bed9494aa1a2cab14f2687bf059fbf5288cd65e8d0d76dc65c3f6442a0b8e39cd3836ccd5b0607e3ed6149a16b13e039bc6f39a17c61d5f2ea411798a36673322a9459bdeaef222189f2a352e77a856e8b7ec93833e6454303930fa6f718df537f4b807949aa4aed6ac5c82f145c44aec9d550b883d40db277e552089491249c5bac906ebfc1672b506625c2c4527cd9f647754187a3845f250130585cd0e70cc490966c4d693daf3f21b697d0745ad3e809ace2a60ebb3a46b4ca502b56ca7a7e07cb240f06b9dee798f580c87d70ea0a7b777d7163450ee76305cfa2e6f0e6331de79da5bd43748fa9602bc6c06b13e42fcf39e567265c470015d4473f75547856052d330cbf3709dde60b8b185ea8e708bb1f526889935af5c5e498d8a0e3bb5e8161c34851eca0e84461a4d2c12a9006f11b6dc488dc76c4c5972237e463d6f769975672c7855d9af10cfc25b839202e8fec2d54e5f2391ab87a15d2bed8ab4b12ef54c29dc098a06c0652928df7078f5e3fe612366046ca20dd70d5eae4e0b5440d41b85f87087388a72b2fd9d783ca8dddc8b2cfbeb4157da07aee9dde6bd499bf44d2420f9a3792d0a4d5107811f99444f993af201a7409c25469614f0a8b6fb2a8c7a71a654167fc3db7d11e1a93145a180998feffff73d1c357ffa982cc4408c0c4cd7a47969d3e30651639ca733c528687b210ec5d116eb4aaca83a66c73be3e82160d123ae90d3e6bd924de7845b9964bd2d28f1bae2ee4b18ac58c5bcac1d413c38212793987e19633cd6407ec08fdce48a370086c1782453bb517db466799765c95ac0a10d2533bfd42802c3ed446e507d8e19ee6e1a8632309b6feb9ebbde0b167a89698df9d98793f923f409532029f634d0ee3728cb0615e5ca3a455a5b94e1daf7365080da50f8ddfed341de4ed2ba18c202f779bdfb6db28cdab889a769e87f2b5feedfbc748dbd20999338b926ef1537d0b625331f9f454f1246ff17eeaea486c246eebb7aa67c9bd943c5e642e5fa5bee4765cb3e8c865119c7dcd86fd532c5c5cf07ebee6a832c70df70a34fc5fe2ed44e6b82c83338d9cd77ff50ab95fb83ed186c4af0d04d018881d19e39781136dc6b3f7c4761517aedf3640030c4d61820b10f8e604e1e260c81619bc3e15036ad2e0f42d689f3a8c2e270a151cc2afcc04746dc0aa91f0fc2383648633ddd3725da0da3f2bdee5b9d8d93f1c5903d449e93db8becae7c88fb1643da18fe711cd4a87ff5001a50d748fc234319a76bc6ae60faeb58e9fcb08a7cc22a5b91d67e9d50d6537935f140718b26a605287e1a067ff1689df94cb3925cde38d548cdcc0ca47344c6ff1f8cc7577e1f835924fa612d9cf3d03f43dcf13cec4cd94f11cac013adcdcb251bcb05a95b245c2ff566011bd8f6217558aed256305f94f672b763d916fcbf0e45d20ba87377d56f4d58df47052d164eae36dc91589a42a8a896ee194afc924151b2e043fa951ee301d2d7f4669683ce33d50bb0cd3218b3d96c4f460ae7e4d86c1bb7b6b78292a88009a1b067853f64962ebbd592aac41bb69574199b62424c8862703a1a0b7f0e1776721dd6bce3c8ffa9e68b6fe9daf5a5fce67d985928652b5abd025943e7036a4cbb6c4fd0d8589fc5fc29955957c86032f7e44b50a4d83537a2cbb627b6e29c1eca1f100b50b9567ef0189fd63bd16606b1643bbaa105fa2288fe71263202386516d333e81128307379fdab2ad37f7e746a20cbb150873f7705bc873ae32c3c19e585cf9045aafb3896a4040f8d1906fae8411e3b7329308ca0f05c93399911f944cc890486ac18cd30ead3743d4f6b5848e648d233e6ced6fcc74ed166f92670d6c9e394985e9fa39e37831f000786eca901a7e27994067397a8b3c0929cb304d4a25b26cab0509ed774de9693d1d5fb72aab592095d708c8228dcf118fbed3ba15244c6f88381bedb438c6513b904e027f56832b522d8b42a46c370d5968a58e494561fd64562dd59d0522899b238312dd19ef6504bf3caaa6a7b41496e95b5e64355b001bd50a4491584ebfff67e5c4720ebb15502596822f668e8dd61567ee59aacd26a2abe9daeaed6b519fd6482f30d68f6057a416157912c1dfe450aba7403e59e4dd8e7cd89071e0e5b7019eeaaeca30965a13ae350baa7ebd587ad7e40265ed9d4500f0acf28fcce1379f4be1bee6dd23c7bd460710b31688f2ef34f97f5ad5510f1e410f337b5b43faffa7a4092ebf4697e155f54f7022529dcde7c0719bf56318f2d15e806788317509d3893f3797710bd0190a78078e530bc05142ba3a6ab03832a416c50a0fdc9153ce5b3b510530664ac350ea15051b676755ed5d13a50b31827ac5f947ceefc6fb257e76f1b1566d1984e5adde86f32dfbd21ad00528a14c37c6e5d834e71fbdba35b71b580e101efb0a6bb9a3cd1bdef4d125f75b4c2eddc896477bef6c9c27a53883d66ab561e3fd2aff354fcfd9b98d649e859a0d56ac250929572a912a147e48bfa14f346e633bb1a20346be7a95777f4c1196062f8b1d768931e63e8ed0e594e072796b74cfbf178ba13bc5f36ffdea16782f252bd51122550d20b478258073a8da0ab5bc6e68ed62860cc01345661a871a9f8b2bdee4280e7f310598bf301cb3a7a358e4af43aaea385b496c9d448df641b47fcfd0941a44f4679f6cdd275e8096337ada0c4fdb63c65e7924298da30ce0289be6f6e17569c16396b0b1a96c4effd4e9077ba38feb045f5640ae94f4baaa3df0a1359e517769f13f988831cab77616d560786df29a291721881c92461e1de4410ef61177fbcc690972942c05668813ba17cebfece53fe65b2a48f46ef221f8202adfe775ff40fd56a92f3361e5ac81330a7f0dd35152b51ede2c3b2912deff5844e503fdbe425a67c6b424d3b0d84fab6d7ffc6d73643b614e2ad5eab8cae6c648d2c74165f71551e3dfc9de8c023c33c3c3118b5d4aca36298bb73c8165c1bf048bf6489774dd168376c0c914591628f61b883b4096205d8c7dd9293a682db4d58d0011c06ab6bcae40d785e1a31e6aaba29bc8f6c955e3e534f02983c5016b8de8e79365c13e6159c706dd822a7dd830c1ab8499d52b74caf7edbf3a5cd602ccae036591acb59c80bdf6db01fab145fdfc2ede81ba09d9ad238b47ac4c863519d3db80dec569530a7fae0260b4f35ec1776bae4e68e6c1a0855a9c7bec77fa33b213a586f7327ce37e21df8c6c5c8004c7647df6062bf66cd039e5183ac0e9ca025667df7fd55d66e7e181a5dd9a7326bca248247f47ee9f01db8c14bbc967fbf077ff504692281d432bea4c76308f6e6afbbfee1d98b0681fd0382544b9406f13642393380f7f74e5994a5fba04caaeff8a54c65d5870de9261bb7739e25f5aeefe6330478b4d9a34295149353dfd18e8ab6769ce699ef1cf72de4834b713b5ef2cfa20ef572c074a687d49446378898c0405b016ddc13e535f45b0ce0b63a90f5b1f7ed5dc12dd369da738b5c2ac92e99f2f25ad416594a1eb8754ac10180852f6c347f5d2c61b3fd186924680eb698da30c3d1d530d2297ebb2bf847fcb8cd134977193c4ca70a25627418ef446bf7e2b8c5023261f0e7881aede9231e2716789d69d536f2078d2a4b38b744a5cc6a6b88cbb6b660121d1a05d8c8aafec21ab8af396b70f22e1a4ce70561fb98eed6f2ee370f5daa2d51e8d62686ed6cac70a37cc67ceebc3ee0f8ef36a7f1ca05035280ffa281678fb4e01b99da87f07fac3b8995488f9089daca9892df0bb9e3a38453876969f4487a3b58cbb71eab2d2b0f2193b9780576a3bec56b2fa223ad84b17aba133b48d284eb8a4949a7d904a24fbfa457127ed79f50cfc724dcc3a9cc0c0adeeb564599929e52753a3a9ad239dfb244bedd4208c3e7e875def18cfe375145faa7fb40af16b6522be894b30a86e9e569898d28faffe16380b0f21a24ee1334018292b92fbc111c89c058b02bb2c50c4eb4047afc0694e6cfa702b22655f2d7514f6e807ee7bcdee0c6d64b98f3fe918efe5d2088d590474f95b88c5270c8d019e1dfeea0b58f1b99beeebf77f50d38172111a34d750496603462bf52e2339da81526c79b366c06118944437664d9e1f968b4cbfcd606037c257cd108fd136de6ec0727cf2c2e51ba687e0f9a4aeb8aa5066c5c8d2b02fb1988a68f18a48903a2b84061b98f77cb44db731b13bf7db651248d38ff089657e18ce68f5957dea95d4ea7646827daa7990e6b31a6325e6d740cac413b1eaf6897ef55c57722b8531170a20cd2f6303b5ea7f4d85e88e592794b88e961c79e49a56b07cb3f4125373901cd0ce6010f588eef63c0e0196f5569a0a29b5cd355df22699673342f38a5a7bf22b756f204d001b6dfae819200d249381b7f9353b171edf7f1c163030e08e682e85beeccd5e61bc4598e7ac05479df0b8617441dc5098a2407b62d2e2d6f0c26256aef0c3e2a439fba46d2f244b677e2580a3eb8b13db9469a6fdbcde9d7f5c293fef2c8382358dc46ea0307a4fa3c3bcefb34c0e32d43405e9649a8c76eb2bf1d35507612794ade6672c4f135f0622858db4dc37379cb4c5fefa66cdfd987e9641e7bcd791ca86ccbc4440a23e17fa03e289bf079353b8e56d052474bee1db15ceeda1e55239f037ae653fc7650ad3d80772c00835b9981d7d3221c928669e5db04372e365b9effe3cf4321e6e8b1ace591ae5f3dd5e051c57a23d6b3f744594b137c962e3b9e21f9a536a790114a45b92936b2ac4da3b486a8ef552a14cbbfacaa0366567c10a6ea8ef4de3bd3c5911f7dda7efefc20673e235fa443471d3eb1e117b541c4369cf16194e85c0633df096bff0b3e59e780a745a39c55fbd9346421c63a840533c0daf854d886e0009cbb05afc3fca5b85e4510faaa21a52d8b5f30c7d63fca70601c2864780f3a5be224e6719a2df61cf84daccbf5eac159e3b981553fe39f25c1a6b013758e32752b86713ff780d332facd62a72f4293079d109c1f05624df896199a2dda9e6b21914109c2cd6d5d80bf58d90f0d5b6bd5e0207a89be7108691fd9629f83afab63f64eaaa033686a85f30534a98c52c9b9196843fe4c3d9403f8c6210c93ce72faab1aba58a02a720b1bd637d0499d05342ead267f437c03fdfc18760aad569a4a16e46cf223aef7fcc9c2f7009f156c14681c33d256daf14dc7ce6fe6e95122bbd04c28d277c7bad53f55d2f23f8f1ef421533f32cfd7ceeb07674a838bf7497044944e99f8ff96a4ce1db25c5640b43ce8e5c25b6465cf76395f9d8802705f9e5b176f96e26976e552023e287addc316cee2944a40adda4300a96e0f7f704ef996dd057455913b7827586b6791c9c54171fa414df0f8d3e85f46bd311dd1d5d71b6232b39231d347891e158e254b8ec116ba7dd81028173735bda23d1589b1140a041895fc14664edbc40cb683904fdf74b343ac675373ef7f7ab67729ff04dc571e8eacee93430fbb2279a36530b701db331b768f433065f6b0deb12b5db03f42ace3300bf16693cca05862e061b40a6bcf39c1fd8beb11693d0dc726ff66824eeffe08c5812305c494e67824da8a5081510e23edd52f53b2b6f6bb6fa1c1b17b4f11f730a7e8d319491eb22ed0946cc54f2a67473ae8a62a17bb51c117e96d52eb9d8855a15e5feeb3668af91ede1347ba221841b217b93498de2c9257196323122c7724f71faa8b03039dab68ef05e82cf280b76db6be18ef27892bc10fca36bb117057888f10d3493ba4c80af742b85239deaf19fe23f794b923dbe1b089c79bdaf17cfa4c644c21378fea4a9780ca36410f3c3829e2794d5781769516c77066c735f035513bf640f8144832830e256855c3bbca485a026b9133baf1b262a6e277d41afde798a40b44fef46b450c230ea94fff68f63f3b59b998d0d767a40c51ca1c0158ace74bd1da0dba787b938ec8bfc3e02a94764de7bd74e717d0688d4efb57710124fb57f273fcbfef51115ebdec98e3a63a534b09708188a985163f27619aa524fed784ca2283f2a039f4bbb71fc7f636a5ae1bba03fc56c2ea990fd5b9336317dd3b0401e901b6b1e2694a60aa2cbc9788ac6545bf7dff9f9ff0f21a88b2ff0796e57aacba915c32437b37b3161b4eef51532c8919003920c2104fad9880a7424d242bd42fcebf69903912476222ddf143c5e6b9a83516cf1a14d80cf95128295ac576f0fd3756d5a2b17a1a89987cdab385964780a94276763a8cc311f8e7cdd3c05e649fd50da2a6795260af1d64770f9317967b07daab2941e9e8a5c28e3808e12c74e5a67bb9ec9a1b41edd9a07f7f60ab65cf967f736ac625b8e36e6b12e79d693e50be68ffca49a4676acd06817b2323d268d5740ecb154f5c8bbd40eb4b8eb22a39405be552a08dfdf7e8eace5706cbf882e00e764ad98cda985c4166d7f803417e2f39075671d175c1f3f370f4cf1a9ff52656e30acc98e78d248b9691b67861a7230a9a4c05665d17d3ca50d52d8d9ad9019eb10c807fa39b9967dacbf0a532ab63dd55316464e4e71fe6878cb36225d2e2d069e7d691f08bc5db728b99f3f0cea890fda9fab05934ca7c8daae33084092f66bb0e0fd9f87356882e960c7c9222923c1bc102665279261340c7abb2d434bcc2d1f4316f7d4ff972be15abd5c397adf69db3986b19e6d684e17cd1bf20ae92aae3da8d5afe206d6cd20232530a19478673c2fe7d07dbf99da9ab9f04e5a17df4618fddc4faad5cfa44355cb3de49e458fd1681168c3fea4af4d320547e346b437add3419aa5f7b228d74981389e114c9ddddbd15679c4e804cbe2e5a8f4ecb092eaced6b61c64f8087c87c94d506e966daab3d59d2f87012adbde0051312b231804bdc09114d1baa4cc03fa0f20514fa81d990966967a760726bf85a2780ac2b2b4aaf572f83dd990d2db044fe076ffaab21fb4e2406d2c453ebc4cb05f9c761b47b772ccc67d1089adaafb850ebe2ccab6461413eb96183069fef2a537fa4d5bfae795b2f519a720e18f178e21d4f812ea8eaa495fba30d6328b25f619992ca16179bff2653934f636dddc43feefea6cb29584fda547bf2316293173763e0e5850f257b229c3962bb321f9b183f8f6790016242cc94a03a855aeac897cc085093b13227debb1d6921b88ef98952bf7eb052b056f6da4067322468442af1acde0ef19a0fd93aa74af8305dfea2250534ba8e204b9ec5e5e681cc17f370585c7d0401585d6cecdef71e0fb25b1f0cc00f3e6dea877202c6cbcba9d7009ffccfb138261ff6e0eaa1ccbec15093031387de39011c45ae64b3533e4ff0a284788478a23e48176c76fa0c7d7d4a19c4c45fe1b829198fb02e50c3eda3fdcd3f6176dbdf33910b03acc86a11dc34beba93ba0ca2b0f76329811b205f1785639ae4446f5870c228693bb73efd38f18ab879dab7a4ba4ac23c5d24ae3ca87d454e0c054a203d5652773fa1f84bc413f68b1c7b9978e51ae81b1613624006e63e33991d7c6c075605a934b5ef71dc7325dcbd62cf9356378e402fe0b5915ca6ce52555149d6760d1e9767504258d441a679a7c0b314507583c830b8eb867504fad635bcd0c5d15dbfd037636cb0722a7888059d51fd7659cc01beb080344df0cc36ce04af92528a</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>“ckr第一个博客”</title>
      <link href="/blog/2021/11/04/%E2%80%9Cckr%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8D%9A%E5%AE%A2%E2%80%9D/"/>
      <url>/blog/2021/11/04/%E2%80%9Cckr%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8D%9A%E5%AE%A2%E2%80%9D/</url>
      
        <content type="html"><![CDATA[<h1 id="我成功了！"><a href="#我成功了！" class="headerlink" title="我成功了！"></a>我成功了！</h1>]]></content>
      
      
      
        <tags>
            
            <tag> one </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
